<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      linux的fork(),waitpid()及wait()的用法 | b0lv42&#39;blog - 不断探索! 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="b0lv42">
    
    

    <meta name="description" content="其实是操作系统的作业...搬运了一些资料过来！">
<meta property="og:type" content="article">
<meta property="og:title" content="linux的fork(),waitpid()及wait()的用法 | b0lv42'blog - 不断探索!">
<meta property="og:url" content="https://b0lv42.github.io/2017/03/23/linux的fork(),waitpid()及wait()的用法/index.html">
<meta property="og:site_name" content="b0lv42'blog - 不断探索!">
<meta property="og:description" content="其实是操作系统的作业...搬运了一些资料过来！">
<meta property="og:image" content="http://img.blog.csdn.net/20170323221008483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170323221311375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170323221348470?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="https://b0lv42.github.io/img/0_1275576795zgzN.gif.png">
<meta property="og:image" content="https://b0lv42.github.io/img/0_1275402306yq99.gif.jpg">
<meta property="og:image" content="https://b0lv42.github.io/img/0_1275406158t1t0.gif.png">
<meta property="og:updated_time" content="2017-04-05T08:28:43.780Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux的fork(),waitpid()及wait()的用法 | b0lv42'blog - 不断探索!">
<meta name="twitter:description" content="其实是操作系统的作业...搬运了一些资料过来！">
<meta name="twitter:image" content="http://img.blog.csdn.net/20170323221008483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">b0lv42&#39;blog - 不断探索!</a></h1>
        <hr class="panel-cover__divider" />

        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">linux的fork(),waitpid()及wait()的用法</h1>

    

    <div class="post-meta">
      <time datetime="2017-03-23" class="post-meta__date date">2017-03-23</time> 

      <span class="post-meta__tags tags">

          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/零零碎碎的知识！/">零零碎碎的知识！</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <h1 id="这个是作业！更新写在前面！"><a href="#这个是作业！更新写在前面！" class="headerlink" title="这个是作业！更新写在前面！"></a>这个是作业！更新写在前面！</h1><h1 id="waitpid-及wait-原文地址"><a href="#waitpid-及wait-原文地址" class="headerlink" title="waitpid()及wait() 原文地址"></a><a href="http://www.2cto.com/os/201203/124851.html" target="_blank" rel="external">waitpid()及wait() 原文地址</a></h1><h1 id="fork-原文地址"><a href="#fork-原文地址" class="headerlink" title="fork() 原文地址"></a><a href="http://m.blog.csdn.net/article/details?id=5640969" target="_blank" rel="external">fork() 原文地址</a></h1><p>试了下一个小程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;<span class="comment">/* 如果是子进程 */</span><span class="comment">/* 在这里等待 */</span> <span class="comment">/* 如果是父进程 */</span>   </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello1\n”);</div><div class="line">        </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello2\n”);</div><div class="line">        </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello3\n”);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是第一个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221008483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="a 这个是第小段运行完毕时的"></p>
<p>这是第二个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221311375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>这是第三个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221348470?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="wait-等待子进程中断或结束"><a href="#wait-等待子进程中断或结束" class="headerlink" title="wait() (等待子进程中断或结束)"></a>wait() (等待子进程中断或结束)</h2><h4 id="表头文件："><a href="#表头文件：" class="headerlink" title="表头文件："></a>表头文件：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div></pre></td></tr></table></figure>
<h4 id="定义函数："><a href="#定义函数：" class="headerlink" title="定义函数："></a>定义函数：</h4><p> <code>pid_t wait (int * status);</code></p>
<h4 id="函数说明："><a href="#函数说明：" class="headerlink" title="函数说明："></a>函数说明：</h4><p>wait()会暂时停止目前进程的执行,直到有信号来到或子进程结束。<br>如果在调用 wait()时子进程已经结束,则 wait()会立即返回<code>子进程结束状态值</code>。<br>子进程的结束状态值会由参数 status 返回,而子进程的进程识别码也会一起返回。</p>
<p>如果不在意结束状态值,则参数<code>status</code> 可以设成 <code>NULL</code>。<br>子进程的结束状态值请参考 <code>waitpid( )</code><br>如果执行成功则返回子进程识别码(PID) ,如果有错误发生则返回返回值-1。失败原因存于 errno 中。</p>
<blockquote>
<p>pid_t  pid1;<br>int status=0;<br>i=wait(&amp;status);</p>
</blockquote>
<p>i返回的是子进程的识别码 <code>PID</code><br>status中存的是子进程的结束状态；可用WEXITSTATUS（status）得到子进程的exit(3)的状态，那么就是3；</p>
<p> <br><br> <br></p>
<h2 id="waitpid-等待子进程中断或结束"><a href="#waitpid-等待子进程中断或结束" class="headerlink" title="waitpid() (等待子进程中断或结束)"></a>waitpid() (等待子进程中断或结束)</h2><h4 id="表头文件：-1"><a href="#表头文件：-1" class="headerlink" title="表头文件："></a>表头文件：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div></pre></td></tr></table></figure>
<h4 id="定义函数：-1"><a href="#定义函数：-1" class="headerlink" title="定义函数："></a>定义函数：</h4><p> <code>pid_t waitpid(pid_t pid,int * status,int options);</code></p>
<h4 id="函数说明：-1"><a href="#函数说明：-1" class="headerlink" title="函数说明："></a>函数说明：</h4><p>waitpid()会暂时停止目前进程的执行,直到有信号来到或子进程结束。</p>
<p>如果在调用 wait()时子进程已经结束,则 wait()会立即返回<code>子进程结束状态值</code>。<br>子进程的结束状态值会由参数 status 返回,而子进程的进程识别码也会一快返回。<br>如果不在意结束状态值,则参数 status 可以设成 NULL。</p>
<p>参数 <code>pid</code> 为欲等待的子进程识别码,其他数值意义如下:</p>
<ul>
<li>pid&lt;-1 等待进程组识别码为 pid 绝对值的任何子进程。</li>
<li>pid=-1 等待任何子进程,相当于 wait()。            </li>
<li>pid=0  等待进程组识别码与目前进程相同的任何子进程。       </li>
<li>pid&gt;0  等待任何子进程识别码为 pid 的子进程。</li>
</ul>
<p>参数 <code>option</code> 可以为 0 或下面的 OR 组合:</p>
<ul>
<li><code>WNOHANG</code> 如果没有任何已经结束的子进程则马上返回, 不予以等待。</li>
<li><code>WUNTRACED</code> 如果子进程进入暂停执行情况则马上返回,但结束状态不予以理会。</li>
</ul>
<p>子进程的结束状态返回后存于 status,底下有几个宏可判别结束情况:</p>
<ul>
<li><code>WIFEXITED(status)</code>   如果子进程正常结束则为非 0 值。</li>
<li><code>WEXITSTATUS(status)</code> 取得子进程 exit()返回的结束代码,一般会先用 WIFEXITED 来判断是否正常结束才能使用此宏。</li>
<li><code>WIFSIGNALED(status)</code> 如果子进程是因为信号而结束则此宏值为真</li>
<li><code>WTERMSIG(status</code>)    取得子进程因信号而中止的信号代码,一般会先用 WIFSIGNALED 来判断后才使用此宏。</li>
<li><code>WIFSTOPPED(status)</code>  如果子进程处于暂停执行情况则此宏值为真。一般只有使用 WUNTRACED 时才会有此情况。</li>
<li><code>WSTOPSIG(status)</code>    取得引发子进程暂停的信号代码,一般会先用 WIFSTOPPED 来判断后才使用此宏。</li>
<li>如果执行成功则返回子进程识别码(PID) ,如果有错误发生则返回返回值-1。失败原因存于 errno 中。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">void</span> )</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">pid_t</span> childpid;</div><div class="line">    <span class="keyword">int</span> status;</div><div class="line">    </div><div class="line">    childpid = fork();</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> ( <span class="number">-1</span> == childpid )</div><div class="line">    &#123;</div><div class="line">        perror( <span class="string">"fork()"</span> );</div><div class="line">        <span class="built_in">exit</span>( EXIT_FAILURE );</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="number">0</span> == childpid )</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">puts</span>( <span class="string">"In child process"</span> );</div><div class="line">        sleep( <span class="number">3</span> );<span class="comment">//让子进程睡眠3秒，看看父进程的行为</span></div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\tchild pid = %d\n"</span>, getpid());</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\tchild ppid = %d\n"</span>, getppid());</div><div class="line">        <span class="built_in">exit</span>(EXIT_SUCCESS);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> </div><div class="line">    &#123;</div><div class="line">        waitpid( childpid, &amp;status, <span class="number">0</span> );</div><div class="line">        <span class="built_in">puts</span>( <span class="string">"in parent"</span> );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tparent pid = %d\n"</span>, getpid() );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tparent ppid = %d\n"</span>, getppid()  );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tchild process exited with status %d \n"</span>, status );</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">exit</span>(EXIT_SUCCESS);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]<span class="meta"># gcc waitpid.c </span></div><div class="line">[root@localhost src]# ./a.out </div><div class="line">In child process</div><div class="line">        child pid = <span class="number">4469</span></div><div class="line">        child ppid = <span class="number">4468</span></div><div class="line">in parent</div><div class="line">        parent pid = <span class="number">4468</span></div><div class="line">        parent ppid = <span class="number">4379</span></div><div class="line">        child process exited with status <span class="number">0</span> </div><div class="line">[root@localhost src]#</div></pre></td></tr></table></figure>
<p>如果将上面<code>waitpid( childpid, &amp;status, 0 );</code>行注释掉，程序执行效果如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]# ./a.out </div><div class="line">In child process</div><div class="line">in parent</div><div class="line">        parent pid = <span class="number">4481</span></div><div class="line">        parent ppid = <span class="number">4379</span></div><div class="line">        child process exited with status <span class="number">1331234400</span> </div><div class="line">[root@localhost src]#   child pid = <span class="number">4482</span></div><div class="line">        child ppid = <span class="number">1</span></div></pre></td></tr></table></figure>
<p>子进程还没有退出，父进程已经退出了。</p>
<h2 id="fork"><a href="#fork" class="headerlink" title="fork()"></a>fork()</h2><h3 id="fork入门知识"><a href="#fork入门知识" class="headerlink" title="fork入门知识"></a>fork入门知识</h3><p>一个进程包括它的<code>代码</code>、<code>数据</code>和<code>分配给进程的资源</code>。<br>fork()函数通过系统调用创建一个与原来进程几乎完全相同的进程，也就是两个进程可以做完全相同的事<br>但如果初始参数或者传入的变量不同，两个进程也可以做不同的事。<br>一个进程调用fork()函数后，系统先给新的进程分配资源，例如存储数据和代码的空间。<br>然后把原来的进程的所有值都复制到新的新进程中，只有少数值与原来的进程的值不同。相当于克隆了一个自己。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span></div><div class="line">&#123; </div><div class="line">	<span class="keyword">pid_t</span> fpid; <span class="comment">//fpid表示fork函数返回的值</span></div><div class="line">	<span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">	fpid=fork(); </div><div class="line">	<span class="keyword">if</span> (fpid &lt; <span class="number">0</span>) </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"error in fork!"</span>); </div><div class="line">	<span class="keyword">else</span> </div><div class="line">    <span class="keyword">if</span> (fpid == <span class="number">0</span>) </div><div class="line">    &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"i am the child process, my process id is %d/n"</span>,getpid()); </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"我是爹的儿子/n"</span>);<span class="comment">//对某些人来说中文看着更直白。</span></div><div class="line">		count++;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> </div><div class="line">    &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"i am the parent process, my process id is %d/n"</span>,getpid()); </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"我是孩子他爹/n"</span>);</div><div class="line">		count++;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"统计结果是: %d/n"</span>,count);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<blockquote>
<p>i am the child process, my process id is 5574<br>我是爹的儿子<br>统计结果是: 1<br>i am the parent process, my process id is 5573<br>我是孩子他爹<br>统计结果是: 1</p>
</blockquote>
<p>在语句<code>fpid=fork()</code>之前，只有一个进程在执行这段代码，但在这条语句之后，就变成两个进程在执行了<br>这两个进程的几乎完全相同，将要执行的下一条语句都是<code>if(fpid&lt;0)</code><br>两个进程的fpid不同与fork函数的特性有关。<br>fork调用的一个奇妙之处就是它仅仅被调用一次，却能够返回两次，它可能有三种不同的返回值：<br>1.在父进程中，fork返回新创建子进程的进程ID；<br>2.在子进程中，fork返回<code>0</code>；<br>3.如果出现错误，fork返回一个负值；</p>
<p>在fork函数执行完毕后，如果创建新进程成功，则出现两个进程，一个是子进程，一个是父进程。<br>在子进程中，fork函数返回0，在父进程中，fork返回新创建子进程的<code>进程ID</code>。<br>我们可以通过fork返回的值来判断当前进程是子进程还是父进程。</p>
<p>引用一位网友的话来解释fpid的值为什么在父子进程中不同：</p>
<blockquote>
<p>其实就相当于链表，进程形成了链表，父进程的fpid(p意味point)指向子进程的进程id, 因为子进程没有子进程，所以其fpid为0.</p>
</blockquote>
<p>fork出错可能有两种原因：<br>1.当前的进程数已经达到了系统规定的上限，这时errno的值被设置为EAGAIN。<br>2.系统内存不足，这时errno的值被设置为ENOMEM。</p>
<p>创建新进程成功后，系统中出现两个基本完全相同的进程，这两个进程执行没有固定的先后顺序，哪个进程先执行要看系统的进程调度策略。<br>每个进程都有一个独特（互不相同）的进程标识符（process ID），可以通过getpid（）函数获得，还有一个记录父进程pid的变量，可以通过getppid（）函数获得变量的值。<br>fork执行完毕后，出现两个进程:<br><img src="/img/0_1275576795zgzN.gif.png" alt="进程图"></p>
<p>有人说两个进程的内容完全一样啊，怎么打印的结果不一样啊，那是因为判断条件的原因，上面列举的只是进程的代码和指令，还有变量啊。<br>执行完fork后，进程1的变量为count=0，fpid！=0（父进程）。进程2的变量为count=0，fpid=0（子进程），这两个进程的变量都是独立的，<code>存在不同的地址中，不是共用的</code>，这点要注意。可以说，我们就是通过fpid来识别和操作父子进程的。<br>还有人可能疑惑为什么不是从#include处开始复制代码的，这是因为fork是把进程当前的情况拷贝一份，执行fork时，进程已经执行完了int count=0;fork只拷贝下一个要执行的代码到新的进程。</p>
<h3 id="fork进阶知识"><a href="#fork进阶知识" class="headerlink" title="fork进阶知识"></a>fork进阶知识</h3><h4 id="代码1："><a href="#代码1：" class="headerlink" title="代码1："></a>代码1：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">int</span> i=<span class="number">0</span>;</div><div class="line">   <span class="built_in">printf</span>(<span class="string">"i son/pa ppid pid  fpid/n"</span>);</div><div class="line"></div><div class="line">   <span class="comment">//ppid指当前进程的父进程pid</span></div><div class="line">   <span class="comment">//pid指当前进程的pid,</span></div><div class="line">   <span class="comment">//fpid指fork返回给当前进程的值</span></div><div class="line"></div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line">   &#123;</div><div class="line">       <span class="keyword">pid_t</span> fpid=fork();</div><div class="line">       <span class="keyword">if</span> (fpid==<span class="number">0</span>)</div><div class="line">    	   <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">       <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">运行结果是：</div><div class="line">&gt;   i son/pa ppid pid  fpid</div><div class="line">&gt;   <span class="number">0</span> parent <span class="number">2043</span> <span class="number">3224</span> <span class="number">3225</span></div><div class="line">&gt;   <span class="number">0</span> child  <span class="number">3224</span> <span class="number">3225</span>    <span class="number">0</span></div><div class="line">&gt;   <span class="number">1</span> parent <span class="number">2043</span> <span class="number">3224</span> <span class="number">3226</span></div><div class="line">&gt;   <span class="number">1</span> parent <span class="number">3224</span> <span class="number">3225</span> <span class="number">3227</span></div><div class="line">&gt;   <span class="number">1</span> child     <span class="number">1</span> <span class="number">3227</span>    <span class="number">0</span></div><div class="line">&gt;   <span class="number">1</span> child     <span class="number">1</span> <span class="number">3226</span>    <span class="number">0</span></div><div class="line"></div><div class="line">##### 第一步：</div><div class="line"></div><div class="line">在父进程中，指令执行到<span class="keyword">for</span>循环中，i=<span class="number">0</span>，接着执行fork，fork执行完后，系统中出现两个进程，分别是p3224和p3225（后面我都用pxxxx表示进程id为xxxx的进程）。</div><div class="line">可以看到父进程p3224的父进程是p2043，子进程p3225的父进程正好是p3224。我们用一个链表来表示这个关系：</div><div class="line">`p2043-&gt;p3224-&gt;p3225`</div><div class="line">第一次fork后，p3224（父进程）的变量为i=<span class="number">0</span>，fpid=<span class="number">3225</span>（fork函数在父进程中返向子进程id），代码内容为：</div><div class="line"></div><div class="line">``` C++</div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line">   &#123;</div><div class="line">       <span class="keyword">pid_t</span> fpid=fork();<span class="comment">//执行完毕，i=0，fpid=3225</span></div><div class="line">       <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">       <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>p3225（子进程）的变量为i=0，fpid=0（fork函数在子进程中返回0）<br>代码内容为： </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line"> &#123;</div><div class="line">    <span class="keyword">pid_t</span> fpid=fork();                         <span class="comment">//执行完毕，i=0，fpid=0</span></div><div class="line">    <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>所以打印出结果：</p>
<blockquote>
<p> 0 parent 2043 3224 3225<br> 0 child  3224 3225    0</p>
</blockquote>
<h5 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h5><p>假设父进程p3224先执行，当进入下一个循环时，i=1，接着执行fork，系统中又新增一个进程p3226，对于此时的父进程，p2043-&gt;p3224（当前进程）-&gt;p3226（被创建的子进程）。<br>对于子进程p3225，执行完第一次循环后，i=1，接着执行fork，系统中新增一个进程p3227，对于此进程，p3224-&gt;p3225（当前进程）-&gt;p3227（被创建的子进程）。从输出可以看到p3225原来是p3224的子进程，现在变成p3227的父进程。父子是相对的，这个大家应该容易理解。只要当前进程执行了fork，该进程就变成了父进程了，就打印出了parent。</p>
<p>所以打印出结果是：</p>
<blockquote>
<p> 1 parent 2043 3224 3226<br> 1 parent 3224 3225 3227</p>
</blockquote>
<h5 id="第三步："><a href="#第三步：" class="headerlink" title="第三步："></a>第三步：</h5><p>第二步创建了两个进程p3226，p3227，这两个进程执行完printf函数后就结束了，因为这两个进程无法进入第三次循环，无法fork，该执行return 0;了，其他进程也是如此。<br>以下是p3226，p3227打印出的结果：</p>
<blockquote>
<p>1 child     1 3227    0<br>1 child     1 3226    0<br>细心的读者可能注意到p3226，p3227的父进程难道不该是p3224和p3225吗，怎么会是1呢？<br>这里得讲到进程的创建和死亡的过程，在p3224和p3225执行完第二个循环后，main函数就该退出了，也即进程该死亡了，因为它已经做完所有事情了。<br>p3224和p3225死亡后，p3226，p3227就没有父进程了，这在操作系统是不被允许的，所以p3226，p3227的父进程就被置为p1了，p1是永远不会死亡的。</p>
</blockquote>
<p>总结一下，这个程序执行的流程如下：<br><img src="/img/0_1275402306yq99.gif.jpg" alt="流程图"><br>这个程序最终产生了3个子进程，执行过6次printf()函数。</p>
<h4 id="代码2："><a href="#代码2：" class="headerlink" title="代码2："></a>代码2：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">int</span> i=<span class="number">0</span>;</div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">   &#123;</div><div class="line">       <span class="keyword">pid_t</span> fpid=fork();</div><div class="line">       <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"son/n"</span>);</div><div class="line">       <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"father/n"</span>);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>它的执行结果是：</p>
<blockquote>
<p>  father<br>  son<br>  father<br>  father<br>  father<br>  father<br>  son<br>  son<br>  father<br>  son<br>  son<br>  son<br>  father<br>  son</p>
</blockquote>
<pre><code>分析：
for        i=0         1           2
          father     father     father
                                    son
                        son       father
                                    son
           son       father     father
                                    son
                        son       father
                                    son
</code></pre><p>其中每一行分别代表一个进程的运行打印结果。<br>总结一下规律，<code>对于这种N次循环的情况，执行printf函数的次数为2*（1+2+4+……+2N-1）次，创建的子进程数为1+2+4+……+2N-1个。</code></p>
<p><a href="http://202.117.3.13/wordpress/?p=81" target="_blank" rel="external">数学推理</a>（该博文的最后）。<br>如果想测一下一个程序中到底创建了几个子进程，<br><code>最好的方法就是调用printf函数打印该进程的pid，也即调用printf(&quot;%d/n&quot;,getpid());或者通过printf(&quot;+/n&quot;);来判断产生了几个进程。</code><br>有人想通过调用printf(“+”)来统计创建了几个进程，这是不妥当的。<br>大家看一下下面的代码：</p>
<h4 id="代码3："><a href="#代码3：" class="headerlink" title="代码3："></a>代码3：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">pid_t</span> fpid;     <span class="comment">//fpid表示fork函数返回的值</span></div><div class="line">	<span class="comment">//printf("fork!");</span></div><div class="line">	<span class="built_in">printf</span>(<span class="string">"fork!/n"</span>);</div><div class="line">	fpid = fork();</div><div class="line">	<span class="keyword">if</span> (fpid &lt; <span class="number">0</span>)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"error in fork!"</span>);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (fpid == <span class="number">0</span>)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"I am the child process, my process id is %d/n"</span>, getpid());</div><div class="line">	<span class="keyword">else</span></div><div class="line">		<span class="built_in">printf</span>(<span class="string">"I am the parent process, my process id is %d/n"</span>, getpid());</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果如下：</p>
<blockquote>
<p>  fork!<br>  I am the parent process, my process id is 3361<br>  I am the child process, my process id is 3362</p>
</blockquote>
<p><code>如果把语句printf(&quot;fork!/n&quot;);注释掉，执行printf(&quot;fork!&quot;);</code><br>则新的程序的执行结果是：</p>
<blockquote>
<p>  fork!I am the parent process, my process id is 3298<br>  fork!I am the child process, my process id is 3299</p>
</blockquote>
<p>程序的唯一的区别就在于一个/n回车符号，为什么结果会相差这么大呢？<br>这就跟printf的缓冲机制有关了，printf某些内容时，操作系统仅仅是把该内容放到了stdout的缓冲队列里了,<code>并没有实际的写到屏幕</code>上。但是,只要看到有/n 则会立即刷新stdout,因此就马上能够打印了。<br>运行了printf(“fork!”)后,“fork!”仅仅被放到了缓冲里,程序运行到fork时缓冲里面的“fork!” 被子进程复制过去了。<br>因此在子进程度stdout缓冲里面就也有了fork!。所以,你最终看到的会是”fork!”被printf了2次！<br>而运行printf(“fork! /n”)后,“fork!”被立即打印到了屏幕上,之后fork到的子进程里的stdout缓冲里不会有fork! 内容。因此你看到的结果会是fork! 被printf了1次！<br>所以说printf(“+”)不能正确地反应进程的数量。</p>
<h4 id="代码4："><a href="#代码4：" class="headerlink" title="代码4："></a>代码4：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line">&#123;</div><div class="line">   fork();</div><div class="line">   fork() &amp;&amp; fork() || fork();</div><div class="line">   fork();</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>问题是不算main这个进程自身，程序到底创建了多少个进程。<br>为了解答这个问题，我们先做一下弊，先用程序验证一下，到此有多少个进程。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line">&#123;</div><div class="line">   fork();</div><div class="line">   fork() &amp;&amp; fork() || fork();</div><div class="line">   fork();</div><div class="line">   <span class="built_in">printf</span>(<span class="string">"+/n"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>总共20个进程，除去main进程，还有19个进程。<br>第一个fork和最后一个fork肯定是会执行的。<br>主要在中间3个fork上，可以画一个图进行描述。<br>这里就需要注意&amp;&amp;和||运算符。</p>
<ul>
<li>A&amp;&amp;B，如果A==0，就没有必要继续执行&amp;&amp;B了；A非0，就需要继续执行&amp;&amp;B。</li>
<li>A||B，如果A非0，就没有必要继续执行||B了，A=0，就需要继续执行||B。<br>fork()对于父进程和子进程的返回值是不同的，按照上面的A&amp;&amp;B和A||B的分支进行画图，可以得出5个分支。</li>
</ul>
<p><img src="/img/0_1275406158t1t0.gif.png" alt="分支图"></p>
<p>加上前面的fork和最后的fork，总共4*5=20个进程，除去main主进程，就是19个进程了。</p>
<h3 id="fork高阶知识"><a href="#fork高阶知识" class="headerlink" title="fork高阶知识"></a>fork高阶知识</h3><pre><code>就fork函数讲一下操作系统进程的创建、死亡和调度等。
</code></pre><h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><p><a href="http://blog.csdn.net/dog_in_yellow/archive/2008/01/13/2041079.aspx" target="_blank" rel="external">http://blog.csdn.net/dog_in_yellow/archive/2008/01/13/2041079.aspx</a></p>
<p><a href="http://blog.chinaunix.net/u1/53053/showart_425189.html" target="_blank" rel="external">http://blog.chinaunix.net/u1/53053/showart_425189.html</a></p>
<p><a href="http://blog.csdn.net/saturnbj/archive/2009/06/19/4282639.aspx" target="_blank" rel="external">http://blog.csdn.net/saturnbj/archive/2009/06/19/4282639.aspx</a></p>
<p><a href="http://www.cppblog.com/zhangxu/archive/2007/12/02/37640.html" target="_blank" rel="external">http://www.cppblog.com/zhangxu/archive/2007/12/02/37640.html</a></p>
<p><a href="http://www.qqread.com/linux/2010/03/y491043.html" target="_blank" rel="external">http://www.qqread.com/linux/2010/03/y491043.html</a></p>
<p><a href="http://www.yuanma.org/data/2009/1103/article_3998.html" target="_blank" rel="external">http://www.yuanma.org/data/2009/1103/article_3998.html</a></p>

  </section>

  
  
</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
