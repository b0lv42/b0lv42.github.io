<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[老鼠走迷宫问题]]></title>
      <url>https://b0lv42.github.io/2017/10/17/%E8%80%81%E9%BC%A0%E8%B5%B0%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98_C%E8%AF%AD%E8%A8%80%E6%A0%88%E9%93%BE%E5%86%99%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>n行m列的经典01迷宫问题，起点是(1,1)，终点是(n,m)，以往都是递归写法非常easy，这次数据结构的课设作业要求用栈链写，打开新世界的大门…</p>
<p>##思考</p>
<ol>
<li>沿用老套路，用2个常量数组来表示行走的方向。</li>
<li>用栈来保存行走的路径。</li>
<li>当无路可走时，当前坐标出栈，回溯到上一步，继续尝试。所以当所有的路径都尝试过了还是没有找到出路时，代表着此迷宫无解，此时栈为空。</li>
<li>用结构体成员from表示这一步走来的方向，用check数组表示是否访问过，以免回路。</li>
<li>初始化map全是1，相当于在迷宫外围加了一圈墙壁，防止越界。</li>
</ol>
<p>大概只想到这么多。</p>
<blockquote>
<p>样例输入：<br>3 3<br>0 1 0<br>0 1 0<br>0 0 0</p>
<p>3 3<br>0 1 1<br>0 1 1<br>0 1 0</p>
<p>5 5<br>0 1 0 0 0<br>0 0 0 1 0<br>1 1 1 1 0<br>1 1 1 1 0<br>1 1 1 1 0</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">pragma</span> <span class="meta-keyword">warning</span>(disable:4996)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> move_x[] = &#123; <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span> &#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> move_y[] = &#123; <span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span> &#125;;</div><div class="line"><span class="keyword">int</span> <span class="built_in">map</span>[<span class="number">100</span>][<span class="number">100</span>],check[<span class="number">100</span>][<span class="number">100</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> node </div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x, y, from;</div><div class="line">	<span class="keyword">struct</span> node *next;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">struct</span> node *top;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Go</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">struct</span> node* <span class="title">Top</span><span class="params">()</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(<span class="keyword">struct</span> node* p)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Empty</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">struct</span> node *p;</div><div class="line">	<span class="keyword">int</span> x[<span class="number">1000</span>], y[<span class="number">1000</span>];</div><div class="line">	<span class="keyword">int</span> len;</div><div class="line">	len = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (Empty() == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		len++;</div><div class="line">		p = Top();</div><div class="line">		x[len] = p-&gt;x;</div><div class="line">		y[len] = p-&gt;y;</div><div class="line">		Pop();</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"steps=%d\n"</span>, len);</div><div class="line">	<span class="keyword">for</span> (i = len; i &gt; <span class="number">0</span>; i--)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"(%d, %d)\n"</span>, x[i],y[i]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Empty</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (top==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">struct</span> node *p;</div><div class="line">	p = top;</div><div class="line">	top = p-&gt;next;</div><div class="line">	<span class="built_in">free</span>(p);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">struct</span> node* <span class="title">Top</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> top;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(<span class="keyword">struct</span> node *p)</span></span></div><div class="line">&#123;</div><div class="line">	p-&gt;next = top;</div><div class="line">	top = p;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Go</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">struct</span> node *p;</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">int</span> nx, ny, come, find;</div><div class="line">	</div><div class="line">	p = (<span class="keyword">struct</span> node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> node));</div><div class="line">	p-&gt;from = <span class="number">0</span>;</div><div class="line">	p-&gt;x = <span class="number">1</span>;</div><div class="line">	p-&gt;y = <span class="number">1</span>;</div><div class="line">	Push(p);</div><div class="line">	check[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	top-&gt;next = <span class="literal">NULL</span>;</div><div class="line">	come = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		find = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (i = come + <span class="number">1</span>; i &lt;= <span class="number">4</span>; i++)</div><div class="line">		&#123;</div><div class="line">			nx = top-&gt;x + move_x[i];</div><div class="line">			ny = top-&gt;y + move_y[i];</div><div class="line">			<span class="keyword">if</span> (check[nx][ny] == <span class="number">0</span> &amp;&amp; <span class="built_in">map</span>[nx][ny] == <span class="number">0</span>)</div><div class="line">			&#123;</div><div class="line">				p = (<span class="keyword">struct</span> node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> node));</div><div class="line">				p-&gt;x = nx;</div><div class="line">				p-&gt;y = ny;</div><div class="line">				p-&gt;from = i;</div><div class="line">				Push(p);</div><div class="line">				come = <span class="number">0</span>;</div><div class="line">				find = <span class="number">1</span>;</div><div class="line">				check[nx][ny] = <span class="number">1</span>;</div><div class="line">				<span class="keyword">if</span> (nx == n &amp;&amp; ny == m)</div><div class="line">				&#123;</div><div class="line">					show();</div><div class="line">					<span class="keyword">return</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (find == <span class="number">0</span>)</div><div class="line">		&#123;</div><div class="line">			p = Top();</div><div class="line">			nx = p-&gt;x;</div><div class="line">			ny = p-&gt;y;</div><div class="line">			come = p-&gt;from;</div><div class="line">			Pop();</div><div class="line">		&#125;</div><div class="line">		find = <span class="number">0</span>;</div><div class="line">		<span class="keyword">if</span> (top == <span class="literal">NULL</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"There's no way out!\n"</span>);</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n, m;</div><div class="line">	<span class="keyword">int</span> i, j;</div><div class="line">	<span class="keyword">char</span> ch;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) &amp;&amp; n &amp;&amp; m)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">memset</span>(check, <span class="number">0</span>, <span class="keyword">sizeof</span>(check));</div><div class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</div><div class="line">			<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">100</span>; j++) <span class="built_in">map</span>[i][j] = <span class="number">1</span>;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">			<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= m; j++)</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;<span class="built_in">map</span>[i][j]);</div><div class="line">		<span class="keyword">if</span> (<span class="built_in">map</span>[<span class="number">1</span>][<span class="number">1</span>] == <span class="number">1</span> || <span class="built_in">map</span>[n][m] == <span class="number">1</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"There is no way out!\n"</span>);</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		Go(n, m);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
            <tag> 零零碎碎的知识！ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[约瑟夫环]]></title>
      <url>https://b0lv42.github.io/2017/10/16/%E7%BA%A6%E7%91%9F%E5%A4%AB%E7%8E%AF%E3%80%90%E9%93%BE%E8%A1%A8C%E8%AF%AD%E8%A8%80%E5%86%99%E6%B3%95%E3%80%91/</url>
      <content type="html"><![CDATA[<h2 id="约瑟夫环（约瑟夫问题）："><a href="#约瑟夫环（约瑟夫问题）：" class="headerlink" title="约瑟夫环（约瑟夫问题）："></a>约瑟夫环（约瑟夫问题）：</h2><p>已知n个人（以编号1，2，3…n分别表示）围坐在一张圆桌周围。从编号为k的人开始报数，数到m的那个人出列；他的下一个人又从1开始报数，数到m的那个人又出列；依此规律重复下去，直到圆桌周围的人全部出列。<br>输出出列的顺序。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>其实这个问题可以用01数组+while循环取模来实现，代码实现非常简单。<br>然而老师要求要用链表来写，啊~我以前只写过前向星，<a href="http://blog.csdn.net/acdreamers/article/details/16902023" target="_blank" rel="external">这里贴出前向星的解析</a>，所以遇到这样的指针啊什么内存啊什么的东西就非常让人摸不到头脑，于是一边百度一边写。<br>这里我设置了一个head和一个tail代表队列的首尾。</p>
<ol>
<li><p>malloc()这个函数的返回值是void，所以为了避免出错，要强制类型转换一下，比如我这个指针的类型是<code>struct Node</code>，所以在这里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p = (struct Node *)malloc(sizeof(struct Node));</div></pre></td></tr></table></figure>
</li>
<li><p>指针分配内存后就不用让它=NULL了。C++也是~</p>
</li>
<li>至于VS怎么建立C工程文件，右侧解决方案资源管理器中右键cpp文件重命名为c后缀就好啦。</li>
<li>VS对c编译很严格，现在define都不管用了，也只有用#pragma warning(disable:4996)来忽略警告了。</li>
<li>VS中编译c文件使用预编译头会报错，调试 –&gt; 属性 –&gt; C/C++ –&gt; 预编译头 –&gt; 不使用预编译头。</li>
</ol>
<p>贴上代码：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">pragma</span> <span class="meta-keyword">warning</span>(disable:4996)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> Size 1000</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> Node</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> data;</div><div class="line">	<span class="keyword">struct</span> Node *next;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">struct</span> Node *head;</div><div class="line"><span class="keyword">struct</span> Node *tail;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">jose</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">struct</span> Node *p;</div><div class="line">	p = (<span class="keyword">struct</span> Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Node));</div><div class="line">	p-&gt;data = <span class="number">1</span>;</div><div class="line">	head = tail = p;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (i = <span class="number">2</span>; i &lt;= n; i++)</div><div class="line">	&#123;</div><div class="line">		p = (<span class="keyword">struct</span> Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Node));</div><div class="line">		p-&gt;data = i;</div><div class="line">		tail-&gt;next = p;</div><div class="line">		tail = p;</div><div class="line">	&#125;</div><div class="line">	tail-&gt;next = head;</div><div class="line"></div><div class="line">	<span class="keyword">struct</span> Node *node;</div><div class="line">	p = head;</div><div class="line">	<span class="keyword">while</span> (p-&gt;data != k) p = p-&gt;next;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (p-&gt;next != p)     <span class="comment">//当仅剩一个节点时</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (i = <span class="number">2</span>; i &lt; m; i++) p = p-&gt;next;</div><div class="line">		node = p-&gt;next;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>, node-&gt;data);</div><div class="line">		p-&gt;next = node-&gt;next;</div><div class="line">		<span class="built_in">free</span>(node);</div><div class="line">		p = p-&gt;next;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d "</span>, p-&gt;data);</div><div class="line">	<span class="built_in">free</span>(p);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n, m, k;</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;m, &amp;k) != EOF) jose(n, m, k);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><br><br>以下是改进的双向链表写法，其实也没有什么不一样，就是变得可以任意左右方向都可以数。<br>具体的操作是，每次有人出列后人数n都会减1，即有可能出现m&gt;n的情况，所以每次人出列后都使m对n取模，这样首先保证m是小于n的。然后每次出列操作之前都对m进行判断，如果m小于n的一半就顺序数，否则就倒着数。<br><code>注意：</code>因为正着数时起始报数的人本身会报一个数，但是倒着数的时候他是不报数的，所以正着数是从2开始数，枚举到要出局的人的上一位，倒着数就从1开始数，数到要出局的人的下一位。<br>这里我特判了m==1的情况，如果要删除自身，就把p置于p的前驱就好啦，后面的删除步骤是一样的。</p>
<p><br><br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">pragma</span> <span class="meta-keyword">warning</span>(disable:4996)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> Size 1000</span></div><div class="line"></div><div class="line"><span class="keyword">struct</span> Node</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> data;</div><div class="line">	<span class="keyword">struct</span> Node *next;</div><div class="line">	<span class="keyword">struct</span> Node *pre;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">struct</span> Node *head;</div><div class="line"><span class="keyword">struct</span> Node *tail;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">jose</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">struct</span> Node *p;</div><div class="line">	p = (<span class="keyword">struct</span> Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Node));</div><div class="line">	p-&gt;data = <span class="number">1</span>;</div><div class="line">	head = tail = p;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (i = <span class="number">2</span>; i &lt;= n; i++)</div><div class="line">	&#123;</div><div class="line">		p = (<span class="keyword">struct</span> Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Node));</div><div class="line">		p-&gt;data = i;</div><div class="line">		tail-&gt;next = p;</div><div class="line">		p-&gt;pre = tail;</div><div class="line">		tail = p;</div><div class="line">	&#125;</div><div class="line">	tail-&gt;next = head;</div><div class="line">	head-&gt;pre = tail;</div><div class="line"></div><div class="line">	<span class="keyword">struct</span> Node *node;</div><div class="line">	p = head;</div><div class="line">	<span class="keyword">while</span> (p-&gt;data != k) p = p-&gt;next;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (p-&gt;next != p)</div><div class="line">	&#123;</div><div class="line">		m = (m - <span class="number">1</span>) % n + <span class="number">1</span>;   <span class="comment">//保证 m &lt; n 且 m != 0</span></div><div class="line">		<span class="keyword">if</span> (m &lt;= (n + <span class="number">1</span>) / <span class="number">2</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (m == <span class="number">1</span>) p = p-&gt;pre;</div><div class="line">			<span class="keyword">else</span> <span class="keyword">for</span> (i = <span class="number">2</span>; i &lt; m; i++) p = p-&gt;next;</div><div class="line">			node = p-&gt;next;</div><div class="line">			node-&gt;next-&gt;pre = p;</div><div class="line">			p-&gt;next = node-&gt;next;</div><div class="line">			p = p-&gt;next;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; n - m + <span class="number">1</span>; i++) p = p-&gt;pre;</div><div class="line">			node = p-&gt;pre;</div><div class="line">			node-&gt;pre-&gt;next = p;</div><div class="line">			p-&gt;pre = node-&gt;pre;</div><div class="line">			p = p-&gt;pre;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>, node-&gt;data);</div><div class="line">		<span class="built_in">free</span>(node);</div><div class="line">		n--;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d "</span>, p-&gt;data);</div><div class="line">	<span class="built_in">free</span>(p);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n, m, k;</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;m, &amp;k) &amp;&amp; n &amp;&amp; m &amp;&amp; k) jose(n, m, k);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> 零零碎碎的知识！ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[n阶奇数魔方阵问题]]></title>
      <url>https://b0lv42.github.io/2017/09/27/n%E9%98%B6%E9%AD%94%E6%96%B9%E9%98%B5%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>#n阶奇数魔方阵基本描述：<br><a href="http://www.docin.com/p-1341105731.html" target="_blank" rel="external">分析的文章的链接</a></p>
<p>贴实现代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">DisplayMatrix</span><span class="params">(<span class="keyword">int</span> *A, <span class="keyword">int</span> n)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> *A;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n)</div><div class="line">	&#123;</div><div class="line">		A = <span class="keyword">new</span> <span class="keyword">int</span>[n*n];</div><div class="line">		<span class="built_in">memset</span>(A, <span class="number">0</span>, n*n * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line"></div><div class="line">		<span class="keyword">int</span> row, col;</div><div class="line">		row = <span class="number">0</span>; col = (n - <span class="number">1</span>) / <span class="number">2</span>;</div><div class="line">		A[row*n + col] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">2</span>; k &lt;= n*n; k++) </div><div class="line">		&#123;</div><div class="line">			row--;</div><div class="line">			col++;</div><div class="line">			<span class="keyword">if</span> (row &lt; <span class="number">0</span>) row += n;</div><div class="line">			<span class="keyword">if</span> (col &gt;= n) col -= n;</div><div class="line">			<span class="keyword">while</span> (A[row*n + col] != <span class="number">0</span>)</div><div class="line">			&#123;</div><div class="line">				row += <span class="number">2</span>; col--;</div><div class="line">				<span class="keyword">if</span> (row &gt;= n) row -= n;</div><div class="line">				<span class="keyword">if</span> (col &lt; <span class="number">0</span>) col += n;</div><div class="line">			&#125;</div><div class="line">			A[row*n + col] = k;</div><div class="line">		&#125;</div><div class="line">		DisplayMatrix(A, n);</div><div class="line">		<span class="keyword">delete</span>[] A;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span>    <span class="title">DisplayMatrix</span><span class="params">(<span class="keyword">int</span> *A, <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> row = <span class="number">0</span>; row &lt; n; ++row) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> col = <span class="number">0</span>; col &lt; n; ++col) &#123;</div><div class="line">			<span class="built_in">cout</span>.width(<span class="number">5</span>);</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; A[row*n + col];</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> 零零碎碎的知识！ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Linux内核模块编程]]></title>
      <url>https://b0lv42.github.io/2017/04/21/linux%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%BC%96%E7%A8%8B/</url>
      <content type="html"><![CDATA[<p>建文件夹名字为插入到系统模块里面的名称.c文件<br>makefile没有后缀名 【作业说明书<br>默认当前后缀下寻找</p>
<p>hello world”的示例代码如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/init.h&gt;</span></span></div><div class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></div><div class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/kernel.h&gt;</span></span></div><div class="line"></div><div class="line"> <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hello_init</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"> &#123;</div><div class="line"> printk(KERN_ALERT<span class="string">"hello,world\n"</span>);</div><div class="line"> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line"> &#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">printk(KERN_ALERT<span class="string">"goodbye\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">module_init(hello_init);</div><div class="line">module_exit(hello_exit);</div><div class="line">MODULE_LICENSE(<span class="string">"GPL"</span>);</div></pre></td></tr></table></figure></p>
<h1 id="头文件声明："><a href="#头文件声明：" class="headerlink" title="头文件声明："></a>头文件声明：</h1><p>第 1、2 行是模块编程的必需头文件。module.h 包含了大量加载模块所需要的函数和符<br>号的定义；init.h 包含了模块初始化和清理函数的定义。如果模块在加载时允许用户传递参<br>数，模块还应该包含 moduleparam.h 头文件。</p>
<h1 id="模块许可申明："><a href="#模块许可申明：" class="headerlink" title="模块许可申明："></a>模块许可申明：</h1><p><code>MODULE_LICENSE(&quot;GPL&quot;)</code>是模块许可声明。Linux 内核从 2.4.10 版本内核开始，模块必须通过MODULE_LICENSE 宏声明此模块的许可证，否则在加载此模块时，会收到内核被污染 “kernel tainted” 的警告。从 linux/module.h 文件中可以看到，被内核接受的有意义的许可证有 “GPL”，<br>“GPL v2”，“GPL and additional rights”，“Dual BSD/GPL”，“Dual MPL/GPL”，“Proprietary”，其中“GPL” 是指明这是 GNU General Public License 的任意版本，其他许可证大家可以查阅资料进一步了解。MODULE_LICENSE 宏声明可以写在模块的任何地方（但必须在函数外面），不过惯例是写在模块最后。</p>
<h1 id="初始化与清理函数的注册："><a href="#初始化与清理函数的注册：" class="headerlink" title="初始化与清理函数的注册："></a>初始化与清理函数的注册：</h1><p>初始化函数通常定义为：<br>static int <strong>init init_func(void)<br>{<br>   //初始化代码<br>}<br>module_init(init_func);<br>般情况下，初始化函数应当申明为 static，以便它们不会在特定文件之外可见。如果<br>该函数只是在初始化使用一次，可在声明语句中加</strong>init 标识，则模块在加载后会丢弃这个<br>初始化函数，释放其内存空间。<br>清理函数通常定义为：<br>static void <strong>exit exit_func(void)<br>{<br>//清理代码<br>}<br>module_exit(exit_func);<br>清理函数没有返回值，因此被声明为 void。声明语句中的</strong>exit 的含义与初始化函数中<br>的__init 类似，不再重述。</p>
<p>obj-m :=hello.o //生成的模块名称是：hello.ko<br>KDIR :=/lib/modules/$(shell uname -r)/build<br>PWD :=$(shell pwd) // PWD 是当前目录<br>default:<br>    make -C $(KDIR) M=$(PWD) modules // -C 指定内核源码目录，M 指定模块源码目录<br>clean:<br>    make -C $(KDIR) M=$(PWD) clean</p>
]]></content>
      
        
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Linux自定义系统调用]]></title>
      <url>https://b0lv42.github.io/2017/04/19/%E5%90%91linux%E5%86%85%E6%A0%B8%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/</url>
      <content type="html"><![CDATA[<p><br></p>
<h2 id="添加系统调用"><a href="#添加系统调用" class="headerlink" title="添加系统调用"></a>添加系统调用</h2><p><br></p>
<h3 id="添加系统调用的头文件索引"><a href="#添加系统调用的头文件索引" class="headerlink" title="添加系统调用的头文件索引"></a>添加系统调用的头文件索引</h3><p>我们要调用syscall是通过unistd提供的一系列系统接口，其中由C提供的接口需要通过修改<code>unistd_64.h</code>这个文件来指定。<br>打开是存放内核源码的地方，进入子目录<code>arch/x86/include/generated/uapi/asm/</code></p>
<blockquote>
<p>比如在我的Linux里此文件是位于 <code>/usr/src/linux-4.10.8/arch/x86/include/generated/uapi/asm/</code> 里的<br>通过使用vim或者自带的gedit打开这个文件，因为打开这个文件需要管理员权限，所以需要在命令前加上sudo。在endif之前添加一个新的系统调用号：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#define __NR_qwq 333</div></pre></td></tr></table></figure></p>
<p><code>333</code>表示系统调用号，不一定要和前面的连续，只要不重复就行啦，<code>qwq</code>则是系统调用名。</p>
</blockquote>
<h3 id="修改系统调用向量表"><a href="#修改系统调用向量表" class="headerlink" title="修改系统调用向量表"></a>修改系统调用向量表</h3><p>在<code>/usr/src/linux-4.10.8/arch/x86/entry/syscalls</code>中打开<code>syscall_64.tbl</code>文件，向里面添加：</p>
<blockquote>
<p>333 64 qwq sys_qwq<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//以内核版本为例，我的版本是4.10.8所以是进入linux-4.10.8文件夹</div><div class="line">//此处的333与你之前添加的系统调用号一致，qwq是调用函数名，sys_qwq是实际的调用函数，这个名字和调用函数名没有关系哦。</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="添加调用实现"><a href="#添加调用实现" class="headerlink" title="添加调用实现"></a>添加调用实现</h3><blockquote>
<p><strong><code>sino大佬博客里这个方法在内核版本4.0以上就不再使用了，都是使用宏定义，如果坚持使用函数声明的办法可能会出错</code></strong><br>后就是添加通过调用号要调用到的程序了 打开<code>/usr/src/linux-4.10.8/include/linux/syscalls.h</code>添加一个函数声明<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="function">asmlinkage <span class="keyword">long</span> <span class="title">sys_qwq</span><span class="params">(<span class="keyword">void</span>)</span></span>;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<p>然后打开<code>/usr/src/linux-4.10.8/kernel/sys.c</code>，并在结尾添加函数：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SYSCALL_DEFINE2(qwq, <span class="keyword">long</span>, b, <span class="keyword">const</span> <span class="keyword">char</span> __user *, a)</div><div class="line">&#123;</div><div class="line">	printk(<span class="string">"Hi, this is %ld who wants to say %s to you!\n"</span>,b,a);</div><div class="line">	<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>DEFINE后面的数字是传入的参数个数，<code>qwq</code>为入口地址，注意这里参数类型和参数名字之间均要用<code>,</code>隔开<br>传入1个long型数据和一个字符串到内核空间，在内核空间打印完后返回一个1</p>
</blockquote>
<h3 id="重新编译"><a href="#重新编译" class="headerlink" title="重新编译"></a>重新编译</h3><p>确定所有文件保存后，执行:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo make -j6 bzImage   //内核数+2</div><div class="line">$ sudo make install</div></pre></td></tr></table></figure></p>
<blockquote>
<p>然后要重启哦！</p>
</blockquote>
<p><br></p>
<h2 id="使用系统调用"><a href="#使用系统调用" class="headerlink" title="使用系统调用"></a>使用系统调用</h2><p><br></p>
<h3 id="编写一个小程序"><a href="#编写一个小程序" class="headerlink" title="编写一个小程序"></a>编写一个小程序</h3><p>新建一个文件 test.cpp 输入以下代码<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/syscall.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> ret = syscall(<span class="number">333</span>); <span class="comment">//syscall 调用号 参数1 之后为系统调用的参数列表</span></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"result is %ld\n"</span>, ret);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="编译程序"><a href="#编译程序" class="headerlink" title="编译程序"></a>编译程序</h3><p>输入命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ g++ test.cpp -o <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<p>等待执行完之后，程序就编译成功啦</p>
<h3 id="执行程序"><a href="#执行程序" class="headerlink" title="执行程序"></a>执行程序</h3><p>输入命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo ./<span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<p>屏幕上会打印出 <code>result is 1</code> 因为我们的系统调用返回数字就是1</p>
<h3 id="查看内核输出信息"><a href="#查看内核输出信息" class="headerlink" title="查看内核输出信息"></a>查看内核输出信息</h3><p>输入命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ dmesg | grep <span class="string">"hello"</span></div></pre></td></tr></table></figure></p>
<p>即可看到内核中输出的printk信息</p>
<blockquote>
<p>grep “hello” 为过滤出包含”hello”的信息<br>此处有坑…如果是在CB里面运行的，记得把运行弹出的shell关掉啊，不然看不到输出消息的…qwq</p>
</blockquote>
<p>Printk()会依据日志级别将指定信息输出到控制台或日志文件中，其格式为：</p>
<blockquote>
<p>printk(日志级别 “消息文本”)；<br>如 printk(KERN_ALERT”hello,world\n”);<br>一般情况下，优先级高于控制台日志级别的消息将被打印到控制台，优先级低于控制台日志级别的消息将被打印到messages日志文件中，而在伪终端下不打印任何的信息。<br>加载模块后，用户可使用 dmesg 命令查看模块初始化函数中的输出信息，如使用 “ dmesg | tail -20 ” 来输出“dmesg”命令的最后 20 行日志。</p>
</blockquote>
]]></content>
      
        
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[利用hexo在windows下搭建静态博客ovo]]></title>
      <url>https://b0lv42.github.io/2017/04/02/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<h2 id="搭建博客前的本地工作"><a href="#搭建博客前的本地工作" class="headerlink" title="搭建博客前的本地工作"></a>搭建博客前的本地工作</h2><p><br></p>
<h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p><code>Git</code>是一个版本控制工具，我们主要使用Git Bash功能把本地的hexo内容提交到Github上去。<br><code>Github</code>是一个用Git做版本控制的项目托管平台，有很多源码，在全世界适用范围广泛。</p>
<hr>
<p><a href="https://git-scm.com/downloads" target="_blank" rel="external">官网下载安装Git（推荐）</a> 或者 <a href="https://github.com/git/git" target="_blank" rel="external">从Github获取</a><br>要根据自己的系统选择合适的版本下载安装哦~</p>
<p><br></p>
<h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><p><a href="http://nodejs.cn/" target="_blank" rel="external">Node.js</a>是一个Javascript运行环境，用来生成静态页面。</p>
<blockquote>
<p>不用那么乖的去查API文档啦，只要安装好就可以了。</p>
</blockquote>
<p><br></p>
<h3 id="安装编辑器（可选）"><a href="#安装编辑器（可选）" class="headerlink" title="安装编辑器（可选）"></a>安装编辑器（可选）</h3><p>在后面配置文件的时候，系统自带的记事本支持很差，为了能够更方便的编辑，可以选择下载<code>Sublime</code>,<code>Text3</code>,<code>VS code</code>或者<code>Notepad++</code>，方便编辑。</p>
<p><br></p>
<h3 id="安装并部署Hexo"><a href="#安装并部署Hexo" class="headerlink" title="安装并部署Hexo"></a>安装并部署Hexo</h3><p>Hexo是一个采用Node.js的静态博客框架。<br><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexo官网（中文支持）</a> 或者 <a href="https://github.com/hexojs/hexo" target="_blank" rel="external">从Github获取</a></p>
<p>你可以使用Hexo官网文档达到与下述步骤同样的效果，<code>强烈建议你使用官网文档获得最新的帮助和支持。</code><br>极客学院在获得允许的情况下制作了Hexo说明文档的离线版本：<br>点击下载 [PDF版] (<a href="http://passport.jikexueyuan.com/sso/login?referer=http%3A%2F%2Fwiki.jikexueyuan.com%2Fdownload%2Fhexo-document%2Fpdf)[ePub版](http://passport.jikexueyuan.com/sso/login?referer=http%3A%2F%2Fwiki.jikexueyuan.com%2Fdownload%2Fhexo-document%2Fepub" target="_blank" rel="external">http://passport.jikexueyuan.com/sso/login?referer=http%3A%2F%2Fwiki.jikexueyuan.com%2Fdownload%2Fhexo-document%2Fpdf)[ePub版](http://passport.jikexueyuan.com/sso/login?referer=http%3A%2F%2Fwiki.jikexueyuan.com%2Fdownload%2Fhexo-document%2Fepub</a>) 或者访问 <a href="http://wiki.jikexueyuan.com/project/hexo-document/" target="_blank" rel="external">极客学院 Wiki</a></p>
<hr>
<p>所有必备的应用程序安装完成后，即可使用npm安装 Hexo：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure></p>
<p>如果npm install时，出现npm error: RPC failed错误：<br>开启翻墙软件或将npm镜像<code>修改为淘宝镜像</code>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm config <span class="built_in">set</span> registry <span class="string">"https://registry.npm.taobao.org"</span></div></pre></td></tr></table></figure></p>
<p>在<code>你想要放置博客文件的位置</code>新建一个名为hexo的文件夹（<code>不要选择需要管理员权限才能创建文件的文件夹</code>），然后在hexo文件夹内右键Git Bash Here，<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="external">常用的Hexo指令</a>执行下列命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo init</div></pre></td></tr></table></figure></p>
<p>然后，Hexo会自动为你生成你网站所需要的全部文件。此时，我们已经在<code>本地</code>搭建好Blog了。<br>在hexo文件夹内右键Git Bash Here，执行下列命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo g  </div><div class="line">$ hexo s</div></pre></td></tr></table></figure></p>
<p>然后在浏览器输入 <a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a> 可以看到当前博客效果，按Ctrl+C停止。<br>如果依旧无法访问表示4000端口（默认）被占用， 输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo s -p 5000</div></pre></td></tr></table></figure></p>
<p>这里切换成5000端口，浏览器输入 <a href="http://localhost:5000" target="_blank" rel="external">http://localhost:5000</a> 访问即可。</p>
<p><br></p>
<h2 id="美化博客"><a href="#美化博客" class="headerlink" title="美化博客"></a>美化博客</h2><p>推荐通过<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">Next主题使用文档</a>学习并且了解Hexo主站和皮肤的配置。<br>我自己用的是<a href="http://moxfive.coding.me/yelee/" target="_blank" rel="external">Yelee主题</a>啦。</p>
<p><br></p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p><br></p>
<h3 id="注册并登陆Github"><a href="#注册并登陆Github" class="headerlink" title="注册并登陆Github"></a>注册并登陆Github</h3><p>Github用来做博客的远程创库、域名、服务器等等。<br>打开Github的官方网站，注册一个Github账户。<br>记住注册时的<code>用户名</code>、<code>密码</code>和<code>验证绑定用的邮箱</code>。</p>
<p><br></p>
<h3 id="开启Github-Page服务"><a href="#开启Github-Page服务" class="headerlink" title="开启Github Page服务"></a>开启Github Page服务</h3><p>点击New repository建立一个新的仓库，重要的事情说三遍：<br><strong><code>仓库名和自己的ID一致！！！</code></strong><br><strong><code>仓库名和自己的ID一致！！！</code></strong><br><strong><code>仓库名和自己的ID一致！！！</code></strong><br>标准格式：用户名.github.io<br>举个栗子：用户名为“qwq”，仓库名为“qwq.github.io”</p>
<p>勾选<code>默认生成一个README.md文件</code>，会后台自动开启pages。<br>如果成功开启，在对应仓库的<code>setting</code> - <code>GitHub Pages</code>会有提示：</p>
<blockquote>
<p>Your site is published at <a href="https://用户名.github.io/" target="_blank" rel="external">https://用户名.github.io/</a><br>GitHub Pages is designed to host your personal, organization, or project pages from a GitHub repository.</p>
</blockquote>
<p><br></p>
<h3 id="配置ssh密钥"><a href="#配置ssh密钥" class="headerlink" title="配置ssh密钥"></a>配置ssh密钥</h3><blockquote>
<p>Github 除了ssh 还可以用https 连接哟~</p>
</blockquote>
<p>打开桌面的Git Bash，检查本机的密钥：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> ~/.ssh</div></pre></td></tr></table></figure></p>
<blockquote>
<p>密钥生成文件的位置为：<br>windows: C:/Users/用户名/.ssh/<br>mac: ~/.ssh/<br>.ssh文件为隐藏文件，需要先设置隐藏文件可见才可以看到</p>
</blockquote>
<p>如果提示：<code>No such file or directory</code> 说明你是第一次使用Git。<br>如果不是第一次使用Git，输入下列指令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mkdir key_backup  </div><div class="line">$ cp id_rsa* key_backup  </div><div class="line">$ rm id_rsa*</div></pre></td></tr></table></figure></p>
<p>生成自己的密钥，记得””中间的邮箱改成自己的。生成过程中会让你输入passphrase口令，可以直接回车，以后出现都是空密码。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-keygen -t rsa -C <span class="string">"Your_Email@Yourmail.com"</span></div></pre></td></tr></table></figure></p>
<p>生成密钥后，在目录（系统盘下的 用户 或者 Users 文件夹 /用户名/.ssh）找到私钥 <code>id_rsa</code> 和公钥 <code>id_rsa.pub</code> 这两个文件。<strong>千万不要把私钥文件 id_rsa 透露给任何人</strong>，否则别人可以以管理员身份登录你的blog。</p>
<h4 id="建立和Github的SSH连接："><a href="#建立和Github的SSH连接：" class="headerlink" title="建立和Github的SSH连接："></a>建立和Github的SSH连接：</h4><p>使用文本工具打开id_rsa.pub,复制里面的所有内容。进入Github主账户下面的<a href="https://github.com/settings/keys" target="_blank" rel="external">Settings</a> - SSH and GPG keys. New SSH key，把刚才复制的东西全部粘贴进去，然后Add添加。</p>
<h4 id="测试是否可以连接到服务器："><a href="#测试是否可以连接到服务器：" class="headerlink" title="测试是否可以连接到服务器："></a>测试是否可以连接到服务器：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@github.com</div></pre></td></tr></table></figure>
<p>如果是第一次连接，需要输入yes后回车，提示输入passphrase，如果刚才是空密码，那么直接回车过去就好。<br>如果出现下面的字符，就说明成功了：</p>
<blockquote>
<p>Hi xxxxx! You’ve successfully authenticated, but GitCafe does not provide shell access.</p>
</blockquote>
<p><br></p>
<h3 id="设置Git账户信息"><a href="#设置Git账户信息" class="headerlink" title="设置Git账户信息"></a>设置Git账户信息</h3><p>在桌面右键Git Bash Here，键入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name <span class="string">"yourname"</span>  </div><div class="line">$ git config --global user.email <span class="string">"yourmaill@maili.com"</span></div></pre></td></tr></table></figure></p>
<p>要和注册Github的信息保持一致！</p>
<p><br></p>
<h3 id="添加Pages目录"><a href="#添加Pages目录" class="headerlink" title="添加Pages目录"></a>添加Pages目录</h3><p>如果直接上传，上传上去的只是所谓的博客源码，如果我们要让我们博客显示出来，就要建立pages目录。</p>
<p>打开hexo文件夹，右键Git Bash Here，然后键入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">'Hello, world'</span> &gt; index.html  </div><div class="line">git init  </div><div class="line">git add .  </div><div class="line">git commit <span class="_">-a</span> -m <span class="string">'Hello, world!'</span>  </div><div class="line">git remote add origin git@github.com:用户名/用户名.github.io  </div><div class="line">git checkout -b master  </div><div class="line">git push origin master</div></pre></td></tr></table></figure></p>
<p>这里提两个点：<br>1.上述git add操作后面是空格+.，别忘记了空格；<br>2.默认创建的仓库”用户名.github.io”有一个默认分支master,似乎Github Page功能不支持其它名字的branch分支，所以其它名字的分支可以作为备份，但是不能作为page页面。</p>
<p><br></p>
<h3 id="设置使Hexo默认更新到Github"><a href="#设置使Hexo默认更新到Github" class="headerlink" title="设置使Hexo默认更新到Github"></a>设置使Hexo默认更新到Github</h3><p>用编辑器打开hexo文件夹下的_config.yml文件(称为<code>站点配置文件</code>)，打开之后把最后的deploy改为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:  </div><div class="line">  <span class="built_in">type</span>: git  </div><div class="line">  repository: git@github.com:用户名/用户名.github.io  </div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<p>注意冒号后面的空格，检查非常严格。</p>
<p><br></p>
<h3 id="完成配置"><a href="#完成配置" class="headerlink" title="完成配置"></a>完成配置</h3><p>每一次本地测试完成后，在Hexo目录右键Git Bash，键入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo g  </div><div class="line">$ hexo d</div></pre></td></tr></table></figure></p>
<blockquote>
<p>这里的hexo g不是复制，是渲染，用主题帮你的md加上css,js效果<br>hexo d是将本地文件上传到github</p>
</blockquote>
<p>你的网站地址就是<code>用户名.github.io</code></p>
<hr>
<p><code>注意，如果你发现本地hexo s测试达到预期效果，但是Github Page没有更新，请再次执行 hexo d 指令。</code></p>
<p><br></p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>在阅读这个部分的内容前，希望你充分阅读了<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexo官网（中文支持）</a>和<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">Next主题使用文档</a>，绝大多数的问题都能够从中得到解决。</p>
<p><br></p>
<h3 id="如果报错："><a href="#如果报错：" class="headerlink" title="如果报错："></a>如果报错：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ERROR Deployer not found: git</div><div class="line">ERROR Deployer not found: github</div></pre></td></tr></table></figure>
<p>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="备份！"><a href="#备份！" class="headerlink" title="备份！"></a>备份！</h3><p>如果你觉得默认的主题不那么让人满意，想要自己修改样式的话，请一定记得：<br><strong><code>先备份！备份！备份</code></strong></p>
<blockquote>
<p>来自博客崩了无数次的果子的心声</p>
</blockquote>
<p><br></p>
<h3 id="电脑重装或者更换电脑使用后如何管理博客"><a href="#电脑重装或者更换电脑使用后如何管理博客" class="headerlink" title="电脑重装或者更换电脑使用后如何管理博客"></a>电脑重装或者更换电脑使用后如何管理博客</h3><p>这个问题其实就是本地的文件丢失啦，但是没有关系，我们可以从github上将以前的文件下载到本地。<br>教程前面讲的node.js, hexo, git仍然需要你安装并部署好，然后我们只需要在想要放置博客本地文件的文件夹右键Get Bash Here，键入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ clone URL</div></pre></td></tr></table></figure></p>
<blockquote>
<p>这个URL是指你放于github上的blog文件地址</p>
</blockquote>
<hr>
<p>其他问题请从互联网等渠道获取解决方式。</p>
<blockquote>
<p>你为什么这么熟练啊</p>
</blockquote>
<p>有的人的教程里面会解释很多具体步骤，我在这里都省略了，主要原因是<code>这些工具、网页仍处于保持更新阶段。而你现在所看到的这个页面就是它出生时的样子，无特殊情况不会进行太多修改。</code>如果使用图文说明，在多次更新后甚至会适得其反。庆幸的是，Hexo官网（中文支持）和Next主题使用文档的更新可以得到保证（只要原作者还在进行开发），这也是为什么我强烈建议读者详细阅读说明文档的原因。</p>
<blockquote>
<p>如果你仔细地阅读过了说明文档，应该能独立完成以下要求：<br>1.为你的博客设置作者昵称、头像和站点描述等；<br>2.设置修改菜单栏和侧边栏的功能；<br>3.设置文章的标签、分类、字体和代码高亮等；<br>4.侧边栏添加社交链接，自定义图片样式<br>5.（一些第三方服务）</p>
</blockquote>
<p><br></p>
<h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><p>如果你购买了一个域名，你需要在<code>hexo的sources</code>目录下新建一个CNAME文件，内容就是你购买的域名地址（不需要任何的额外内容）。<br>在域名解析（域名提供商）中添加设置三项：</p>
<blockquote>
<p>记录类型A 主机记录@ 记录值192.30.252.153<br>记录类型A 主机记录@ 记录值192.30.252.154<br>记录类型CNAME 主机记录www 记录值 用户名.github.io.</p>
</blockquote>
<p>过一段时间访问你购买的域名即可。<br>Markdown语法</p>
<p>点击查看<a href="http://www.appinn.com/markdown/" target="_blank" rel="external">Markdown 语法说明(简体中文版)</a><br>下载<a href="http://markdownpad.com/" target="_blank" rel="external">MarkdownPad2 激活Pro版本</a>：</p>
<blockquote>
<p>邮箱： Soar360@live.com<br>授权秘钥： 根据邮箱提示关键词自行获取</p>
</blockquote>
<p><br></p>
<h2 id="七牛云图床"><a href="#七牛云图床" class="headerlink" title="七牛云图床"></a>七牛云图床</h2><p>注册<a href="https://www.qiniu.com/" target="_blank" rel="external">七牛云</a>和<a href="http://jiantuku.com/#/" target="_blank" rel="external">极简图床</a>，傻瓜式操作，解决图片储存问题。</p>
<p><br></p>
<h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p>Doge - <a href="http://acdoge.com/github-hexo.html" target="_blank" rel="external">小fa的奇思幻想</a><br>Processor - <a href="http://processor.pub/2016/10/07/Windows%E4%B8%8B%E5%88%A9%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" target="_blank" rel="external">Windows下利用Hexo搭建静态博客</a><br>LoRexxar - <a href="http://lorexxar.cn/2015/05/22/Hexo-blogs/" target="_blank" rel="external">Windows Hexo博客安装配置优化（小白篇）</a><br>向以上博主表示衷心的感谢，侵删。</p>
]]></content>
      
        
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[找图片啊图标啊什么的]]></title>
      <url>https://b0lv42.github.io/2017/04/02/%E6%89%BE%E5%9B%BE%E7%89%87%E5%95%8A%E5%9B%BE%E6%A0%87%E5%95%8A%E4%BB%80%E4%B9%88%E7%9A%84/</url>
      <content type="html"><![CDATA[<h1 id="图片："><a href="#图片：" class="headerlink" title="图片："></a>图片：</h1><p><a href="http://zerospace.asika.tw/" target="_blank" rel="external">http://zerospace.asika.tw/</a><br>pixabay.com<br><a href="https://alpha.wallhaven.cc/" target="_blank" rel="external">https://alpha.wallhaven.cc/</a></p>
<h1 id="Logo："><a href="#Logo：" class="headerlink" title="Logo："></a>Logo：</h1><p><a href="http://instantlogosearch.com/" target="_blank" rel="external">http://instantlogosearch.com/</a></p>
<h1 id="图标："><a href="#图标：" class="headerlink" title="图标："></a>图标：</h1><p><a href="http://www.iconfont.cn/" target="_blank" rel="external">http://www.iconfont.cn/</a></p>
<hr>
<p><a href="http://www.doyoudo.com/resources" target="_blank" rel="external">http://www.doyoudo.com/resources</a><br><a href="http://hao.uisdc.com/" target="_blank" rel="external">http://hao.uisdc.com/</a></p>
]]></content>
      
        
        <tags>
            
            <tag> 收集的乱七八糟的东西！ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[linux的fork(),waitpid()及wait()的用法]]></title>
      <url>https://b0lv42.github.io/2017/04/02/linux%E7%9A%84fork(),waitpid()%E5%8F%8Await()%E7%9A%84%E7%94%A8%E6%B3%95/</url>
      <content type="html"><![CDATA[<h1 id="waitpid-及wait-原文地址"><a href="#waitpid-及wait-原文地址" class="headerlink" title="waitpid()及wait() 原文地址"></a><a href="http://www.2cto.com/os/201203/124851.html" target="_blank" rel="external">waitpid()及wait() 原文地址</a></h1><h1 id="fork-原文地址"><a href="#fork-原文地址" class="headerlink" title="fork() 原文地址"></a><a href="http://m.blog.csdn.net/article/details?id=5640969" target="_blank" rel="external">fork() 原文地址</a></h1><p>试了下一个小程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;<span class="comment">/* 如果是子进程 */</span><span class="comment">/* 在这里等待 */</span> <span class="comment">/* 如果是父进程 */</span>   </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello1\n”);</div><div class="line">        </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello2\n”);</div><div class="line">        </div><div class="line">        pc=fork();</div><div class="line">        <span class="keyword">if</span>(pc==<span class="number">0</span>)     </div><div class="line">        &#123;       </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"This is child process with pid of %d\n"</span>,getpid()); </div><div class="line">        &#125; </div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;    </div><div class="line">             pr=wait(<span class="literal">NULL</span>); </div><div class="line">             <span class="built_in">printf</span>(<span class="string">"I catched a child process with pid of %d\n"</span>),pr); </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(“hello3\n”);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是第一个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221008483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="a 这个是第小段运行完毕时的"></p>
<p>这是第二个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221311375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>这是第三个fork()调用完毕后的输出：<br><img src="http://img.blog.csdn.net/20170323221348470?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQm9sdmFy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="wait-等待子进程中断或结束"><a href="#wait-等待子进程中断或结束" class="headerlink" title="wait() (等待子进程中断或结束)"></a>wait() (等待子进程中断或结束)</h2><h4 id="表头文件："><a href="#表头文件：" class="headerlink" title="表头文件："></a>表头文件：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div></pre></td></tr></table></figure>
<h4 id="定义函数："><a href="#定义函数：" class="headerlink" title="定义函数："></a>定义函数：</h4><p> <code>pid_t wait (int * status);</code></p>
<h4 id="函数说明："><a href="#函数说明：" class="headerlink" title="函数说明："></a>函数说明：</h4><p>wait()会暂时停止目前进程的执行,直到有信号来到或子进程结束。<br>如果在调用 wait()时子进程已经结束,则 wait()会立即返回<code>子进程结束状态值</code>。<br>子进程的结束状态值会由参数 status 返回,而子进程的进程识别码也会一起返回。</p>
<p>如果不在意结束状态值,则参数<code>status</code> 可以设成 <code>NULL</code>。<br>子进程的结束状态值请参考 <code>waitpid( )</code><br>如果执行成功则返回子进程识别码(PID) ,如果有错误发生则返回返回值-1。失败原因存于 errno 中。</p>
<blockquote>
<p>pid_t  pid1;<br>int status=0;<br>i=wait(&amp;status);</p>
</blockquote>
<p>i返回的是子进程的识别码 <code>PID</code><br>status中存的是子进程的结束状态；可用WEXITSTATUS（status）得到子进程的exit(3)的状态，那么就是3；</p>
<p> <br><br> <br></p>
<h2 id="waitpid-等待子进程中断或结束"><a href="#waitpid-等待子进程中断或结束" class="headerlink" title="waitpid() (等待子进程中断或结束)"></a>waitpid() (等待子进程中断或结束)</h2><h4 id="表头文件：-1"><a href="#表头文件：-1" class="headerlink" title="表头文件："></a>表头文件：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/wait.h&gt;</span></span></div></pre></td></tr></table></figure>
<h4 id="定义函数：-1"><a href="#定义函数：-1" class="headerlink" title="定义函数："></a>定义函数：</h4><p> <code>pid_t waitpid(pid_t pid,int * status,int options);</code></p>
<h4 id="函数说明：-1"><a href="#函数说明：-1" class="headerlink" title="函数说明："></a>函数说明：</h4><p>waitpid()会暂时停止目前进程的执行,直到有信号来到或子进程结束。</p>
<p>如果在调用 wait()时子进程已经结束,则 wait()会立即返回<code>子进程结束状态值</code>。<br>子进程的结束状态值会由参数 status 返回,而子进程的进程识别码也会一快返回。<br>如果不在意结束状态值,则参数 status 可以设成 NULL。</p>
<p>参数 <code>pid</code> 为欲等待的子进程识别码,其他数值意义如下:</p>
<ul>
<li>pid&lt;-1 等待进程组识别码为 pid 绝对值的任何子进程。</li>
<li>pid=-1 等待任何子进程,相当于 wait()。            </li>
<li>pid=0  等待进程组识别码与目前进程相同的任何子进程。       </li>
<li>pid&gt;0  等待任何子进程识别码为 pid 的子进程。</li>
</ul>
<p>参数 <code>option</code> 可以为 0 或下面的 OR 组合:</p>
<ul>
<li><code>WNOHANG</code> 如果没有任何已经结束的子进程则马上返回, 不予以等待。</li>
<li><code>WUNTRACED</code> 如果子进程进入暂停执行情况则马上返回,但结束状态不予以理会。</li>
</ul>
<p>子进程的结束状态返回后存于 status,底下有几个宏可判别结束情况:</p>
<ul>
<li><code>WIFEXITED(status)</code>   如果子进程正常结束则为非 0 值。</li>
<li><code>WEXITSTATUS(status)</code> 取得子进程 exit()返回的结束代码,一般会先用 WIFEXITED 来判断是否正常结束才能使用此宏。</li>
<li><code>WIFSIGNALED(status)</code> 如果子进程是因为信号而结束则此宏值为真</li>
<li><code>WTERMSIG(status</code>)    取得子进程因信号而中止的信号代码,一般会先用 WIFSIGNALED 来判断后才使用此宏。</li>
<li><code>WIFSTOPPED(status)</code>  如果子进程处于暂停执行情况则此宏值为真。一般只有使用 WUNTRACED 时才会有此情况。</li>
<li><code>WSTOPSIG(status)</code>    取得引发子进程暂停的信号代码,一般会先用 WIFSTOPPED 来判断后才使用此宏。</li>
<li>如果执行成功则返回子进程识别码(PID) ,如果有错误发生则返回返回值-1。失败原因存于 errno 中。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">void</span> )</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">pid_t</span> childpid;</div><div class="line">    <span class="keyword">int</span> status;</div><div class="line">    </div><div class="line">    childpid = fork();</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> ( <span class="number">-1</span> == childpid )</div><div class="line">    &#123;</div><div class="line">        perror( <span class="string">"fork()"</span> );</div><div class="line">        <span class="built_in">exit</span>( EXIT_FAILURE );</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="number">0</span> == childpid )</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">puts</span>( <span class="string">"In child process"</span> );</div><div class="line">        sleep( <span class="number">3</span> );<span class="comment">//让子进程睡眠3秒，看看父进程的行为</span></div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\tchild pid = %d\n"</span>, getpid());</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\tchild ppid = %d\n"</span>, getppid());</div><div class="line">        <span class="built_in">exit</span>(EXIT_SUCCESS);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> </div><div class="line">    &#123;</div><div class="line">        waitpid( childpid, &amp;status, <span class="number">0</span> );</div><div class="line">        <span class="built_in">puts</span>( <span class="string">"in parent"</span> );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tparent pid = %d\n"</span>, getpid() );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tparent ppid = %d\n"</span>, getppid()  );</div><div class="line">        <span class="built_in">printf</span>( <span class="string">"\tchild process exited with status %d \n"</span>, status );</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">exit</span>(EXIT_SUCCESS);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]<span class="meta"># gcc waitpid.c </span></div><div class="line">[root@localhost src]# ./a.out </div><div class="line">In child process</div><div class="line">        child pid = <span class="number">4469</span></div><div class="line">        child ppid = <span class="number">4468</span></div><div class="line">in parent</div><div class="line">        parent pid = <span class="number">4468</span></div><div class="line">        parent ppid = <span class="number">4379</span></div><div class="line">        child process exited with status <span class="number">0</span> </div><div class="line">[root@localhost src]#</div></pre></td></tr></table></figure>
<p>如果将上面<code>waitpid( childpid, &amp;status, 0 );</code>行注释掉，程序执行效果如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost src]# ./a.out </div><div class="line">In child process</div><div class="line">in parent</div><div class="line">        parent pid = <span class="number">4481</span></div><div class="line">        parent ppid = <span class="number">4379</span></div><div class="line">        child process exited with status <span class="number">1331234400</span> </div><div class="line">[root@localhost src]#   child pid = <span class="number">4482</span></div><div class="line">        child ppid = <span class="number">1</span></div></pre></td></tr></table></figure>
<p>子进程还没有退出，父进程已经退出了。</p>
<h2 id="fork"><a href="#fork" class="headerlink" title="fork()"></a>fork()</h2><h3 id="fork入门知识"><a href="#fork入门知识" class="headerlink" title="fork入门知识"></a>fork入门知识</h3><p>一个进程包括它的<code>代码</code>、<code>数据</code>和<code>分配给进程的资源</code>。<br>fork()函数通过系统调用创建一个与原来进程几乎完全相同的进程，也就是两个进程可以做完全相同的事<br>但如果初始参数或者传入的变量不同，两个进程也可以做不同的事。<br>一个进程调用fork()函数后，系统先给新的进程分配资源，例如存储数据和代码的空间。<br>然后把原来的进程的所有值都复制到新的新进程中，只有少数值与原来的进程的值不同。相当于克隆了一个自己。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span></div><div class="line">&#123; </div><div class="line">	<span class="keyword">pid_t</span> fpid; <span class="comment">//fpid表示fork函数返回的值</span></div><div class="line">	<span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">	fpid=fork(); </div><div class="line">	<span class="keyword">if</span> (fpid &lt; <span class="number">0</span>) </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"error in fork!"</span>); </div><div class="line">	<span class="keyword">else</span> </div><div class="line">    <span class="keyword">if</span> (fpid == <span class="number">0</span>) </div><div class="line">    &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"i am the child process, my process id is %d/n"</span>,getpid()); </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"我是爹的儿子/n"</span>);<span class="comment">//对某些人来说中文看着更直白。</span></div><div class="line">		count++;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> </div><div class="line">    &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"i am the parent process, my process id is %d/n"</span>,getpid()); </div><div class="line">		<span class="built_in">printf</span>(<span class="string">"我是孩子他爹/n"</span>);</div><div class="line">		count++;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"统计结果是: %d/n"</span>,count);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<blockquote>
<p>i am the child process, my process id is 5574<br>我是爹的儿子<br>统计结果是: 1<br>i am the parent process, my process id is 5573<br>我是孩子他爹<br>统计结果是: 1</p>
</blockquote>
<p>在语句<code>fpid=fork()</code>之前，只有一个进程在执行这段代码，但在这条语句之后，就变成两个进程在执行了<br>这两个进程的几乎完全相同，将要执行的下一条语句都是<code>if(fpid&lt;0)</code><br>两个进程的fpid不同与fork函数的特性有关。<br>fork调用的一个奇妙之处就是它仅仅被调用一次，却能够返回两次，它可能有三种不同的返回值：<br>1.在父进程中，fork返回新创建子进程的进程ID；<br>2.在子进程中，fork返回<code>0</code>；<br>3.如果出现错误，fork返回一个负值；</p>
<p>在fork函数执行完毕后，如果创建新进程成功，则出现两个进程，一个是子进程，一个是父进程。<br>在子进程中，fork函数返回0，在父进程中，fork返回新创建子进程的<code>进程ID</code>。<br>我们可以通过fork返回的值来判断当前进程是子进程还是父进程。</p>
<p>引用一位网友的话来解释fpid的值为什么在父子进程中不同：</p>
<blockquote>
<p>其实就相当于链表，进程形成了链表，父进程的fpid(p意味point)指向子进程的进程id, 因为子进程没有子进程，所以其fpid为0.</p>
</blockquote>
<p>fork出错可能有两种原因：<br>1.当前的进程数已经达到了系统规定的上限，这时errno的值被设置为EAGAIN。<br>2.系统内存不足，这时errno的值被设置为ENOMEM。</p>
<p>创建新进程成功后，系统中出现两个基本完全相同的进程，这两个进程执行没有固定的先后顺序，哪个进程先执行要看系统的进程调度策略。<br>每个进程都有一个独特（互不相同）的进程标识符（process ID），可以通过getpid（）函数获得，还有一个记录父进程pid的变量，可以通过getppid（）函数获得变量的值。<br>fork执行完毕后，出现两个进程:<br><img src="/img/0_1275576795zgzN.gif.png" alt="进程图"></p>
<p>有人说两个进程的内容完全一样啊，怎么打印的结果不一样啊，那是因为判断条件的原因，上面列举的只是进程的代码和指令，还有变量啊。<br>执行完fork后，进程1的变量为count=0，fpid！=0（父进程）。进程2的变量为count=0，fpid=0（子进程），这两个进程的变量都是独立的，<code>存在不同的地址中，不是共用的</code>，这点要注意。可以说，我们就是通过fpid来识别和操作父子进程的。<br>还有人可能疑惑为什么不是从#include处开始复制代码的，这是因为fork是把进程当前的情况拷贝一份，执行fork时，进程已经执行完了int count=0;fork只拷贝下一个要执行的代码到新的进程。</p>
<h3 id="fork进阶知识"><a href="#fork进阶知识" class="headerlink" title="fork进阶知识"></a>fork进阶知识</h3><h4 id="代码1："><a href="#代码1：" class="headerlink" title="代码1："></a>代码1：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">int</span> i=<span class="number">0</span>;</div><div class="line">   <span class="built_in">printf</span>(<span class="string">"i son/pa ppid pid  fpid/n"</span>);</div><div class="line"></div><div class="line">   <span class="comment">//ppid指当前进程的父进程pid</span></div><div class="line">   <span class="comment">//pid指当前进程的pid,</span></div><div class="line">   <span class="comment">//fpid指fork返回给当前进程的值</span></div><div class="line"></div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line">   &#123;</div><div class="line">       <span class="keyword">pid_t</span> fpid=fork();</div><div class="line">       <span class="keyword">if</span> (fpid==<span class="number">0</span>)</div><div class="line">    	   <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">       <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<blockquote>
<p>  i son/pa ppid pid  fpid<br>  0 parent 2043 3224 3225<br>  0 child  3224 3225    0<br>  1 parent 2043 3224 3226<br>  1 parent 3224 3225 3227<br>  1 child     1 3227    0<br>  1 child     1 3226    0</p>
</blockquote>
<h5 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h5><p>在父进程中，指令执行到for循环中，i=0，接着执行fork，fork执行完后，系统中出现两个进程，分别是p3224和p3225（后面我都用pxxxx表示进程id为xxxx的进程）。<br>可以看到父进程p3224的父进程是p2043，子进程p3225的父进程正好是p3224。我们用一个链表来表示这个关系：<br><code>p2043-&gt;p3224-&gt;p3225</code><br>第一次fork后，p3224（父进程）的变量为i=0，fpid=3225（fork函数在父进程中返向子进程id），代码内容为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">pid_t</span> fpid=fork();<span class="comment">//执行完毕，i=0，fpid=3225</span></div><div class="line">    <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>p3225（子进程）的变量为i=0，fpid=0（fork函数在子进程中返回0）<br>代码内容为： </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</div><div class="line"> &#123;</div><div class="line">    <span class="keyword">pid_t</span> fpid=fork();                         <span class="comment">//执行完毕，i=0，fpid=0</span></div><div class="line">    <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"%d child  %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d parent %4d %4d %4d/n"</span>,i,getppid(),getpid(),fpid);</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div></pre></td></tr></table></figure>
<p>所以打印出结果：</p>
<blockquote>
<p> 0 parent 2043 3224 3225<br> 0 child  3224 3225    0</p>
</blockquote>
<h5 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h5><p>假设父进程p3224先执行，当进入下一个循环时，i=1，接着执行fork，系统中又新增一个进程p3226，对于此时的父进程，p2043-&gt;p3224（当前进程）-&gt;p3226（被创建的子进程）。<br>对于子进程p3225，执行完第一次循环后，i=1，接着执行fork，系统中新增一个进程p3227，对于此进程，p3224-&gt;p3225（当前进程）-&gt;p3227（被创建的子进程）。从输出可以看到p3225原来是p3224的子进程，现在变成p3227的父进程。父子是相对的，这个大家应该容易理解。只要当前进程执行了fork，该进程就变成了父进程了，就打印出了parent。</p>
<p>所以打印出结果是：</p>
<blockquote>
<p> 1 parent 2043 3224 3226<br> 1 parent 3224 3225 3227</p>
</blockquote>
<h5 id="第三步："><a href="#第三步：" class="headerlink" title="第三步："></a>第三步：</h5><p>第二步创建了两个进程p3226，p3227，这两个进程执行完printf函数后就结束了，因为这两个进程无法进入第三次循环，无法fork，该执行return 0;了，其他进程也是如此。<br>以下是p3226，p3227打印出的结果：</p>
<blockquote>
<p>1 child     1 3227    0<br>1 child     1 3226    0<br>细心的读者可能注意到p3226，p3227的父进程难道不该是p3224和p3225吗，怎么会是1呢？<br>这里得讲到进程的创建和死亡的过程，在p3224和p3225执行完第二个循环后，main函数就该退出了，也即进程该死亡了，因为它已经做完所有事情了。<br>p3224和p3225死亡后，p3226，p3227就没有父进程了，这在操作系统是不被允许的，所以p3226，p3227的父进程就被置为p1了，p1是永远不会死亡的。</p>
</blockquote>
<p>总结一下，这个程序执行的流程如下：<br><img src="/img/0_1275402306yq99.gif.jpg" alt="流程图"><br>这个程序最终产生了3个子进程，执行过6次printf()函数。</p>
<h4 id="代码2："><a href="#代码2：" class="headerlink" title="代码2："></a>代码2：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">int</span> i=<span class="number">0</span>;</div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">   &#123;</div><div class="line">       <span class="keyword">pid_t</span> fpid=fork();</div><div class="line">       <span class="keyword">if</span> (fpid==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"son/n"</span>);</div><div class="line">       <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"father/n"</span>);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>它的执行结果是：</p>
<blockquote>
<p>  father<br>  son<br>  father<br>  father<br>  father<br>  father<br>  son<br>  son<br>  father<br>  son<br>  son<br>  son<br>  father<br>  son</p>
</blockquote>
<pre><code>分析：
for        i=0         1           2
          father     father     father
                                    son
                        son       father
                                    son
           son       father     father
                                    son
                        son       father
                                    son
</code></pre><p>其中每一行分别代表一个进程的运行打印结果。<br>总结一下规律，<code>对于这种N次循环的情况，执行printf函数的次数为2*（1+2+4+……+2N-1）次，创建的子进程数为1+2+4+……+2N-1个。</code></p>
<p><a href="http://202.117.3.13/wordpress/?p=81" target="_blank" rel="external">数学推理</a>（该博文的最后）。<br>如果想测一下一个程序中到底创建了几个子进程，<br><code>最好的方法就是调用printf函数打印该进程的pid，也即调用printf(&quot;%d/n&quot;,getpid());或者通过printf(&quot;+/n&quot;);来判断产生了几个进程。</code><br>有人想通过调用printf(“+”)来统计创建了几个进程，这是不妥当的。<br>大家看一下下面的代码：</p>
<h4 id="代码3："><a href="#代码3：" class="headerlink" title="代码3："></a>代码3：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">pid_t</span> fpid;     <span class="comment">//fpid表示fork函数返回的值</span></div><div class="line">	<span class="comment">//printf("fork!");</span></div><div class="line">	<span class="built_in">printf</span>(<span class="string">"fork!/n"</span>);</div><div class="line">	fpid = fork();</div><div class="line">	<span class="keyword">if</span> (fpid &lt; <span class="number">0</span>)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"error in fork!"</span>);</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (fpid == <span class="number">0</span>)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"I am the child process, my process id is %d/n"</span>, getpid());</div><div class="line">	<span class="keyword">else</span></div><div class="line">		<span class="built_in">printf</span>(<span class="string">"I am the parent process, my process id is %d/n"</span>, getpid());</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果如下：</p>
<blockquote>
<p>  fork!<br>  I am the parent process, my process id is 3361<br>  I am the child process, my process id is 3362</p>
</blockquote>
<p><code>如果把语句printf(&quot;fork!/n&quot;);注释掉，执行printf(&quot;fork!&quot;);</code><br>则新的程序的执行结果是：</p>
<blockquote>
<p>  fork!I am the parent process, my process id is 3298<br>  fork!I am the child process, my process id is 3299</p>
</blockquote>
<p>程序的唯一的区别就在于一个/n回车符号，为什么结果会相差这么大呢？<br>这就跟printf的缓冲机制有关了，printf某些内容时，操作系统仅仅是把该内容放到了stdout的缓冲队列里了,<code>并没有实际的写到屏幕</code>上。但是,只要看到有/n 则会立即刷新stdout,因此就马上能够打印了。<br>运行了printf(“fork!”)后,“fork!”仅仅被放到了缓冲里,程序运行到fork时缓冲里面的“fork!” 被子进程复制过去了。<br>因此在子进程度stdout缓冲里面就也有了fork!。所以,你最终看到的会是”fork!”被printf了2次！<br>而运行printf(“fork! /n”)后,“fork!”被立即打印到了屏幕上,之后fork到的子进程里的stdout缓冲里不会有fork! 内容。因此你看到的结果会是fork! 被printf了1次！<br>所以说printf(“+”)不能正确地反应进程的数量。</p>
<h4 id="代码4："><a href="#代码4：" class="headerlink" title="代码4："></a>代码4：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line">&#123;</div><div class="line">   fork();</div><div class="line">   fork() &amp;&amp; fork() || fork();</div><div class="line">   fork();</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>问题是不算main这个进程自身，程序到底创建了多少个进程。<br>为了解答这个问题，我们先做一下弊，先用程序验证一下，到此有多少个进程。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line">&#123;</div><div class="line">   fork();</div><div class="line">   fork() &amp;&amp; fork() || fork();</div><div class="line">   fork();</div><div class="line">   <span class="built_in">printf</span>(<span class="string">"+/n"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>总共20个进程，除去main进程，还有19个进程。<br>第一个fork和最后一个fork肯定是会执行的。<br>主要在中间3个fork上，可以画一个图进行描述。<br>这里就需要注意&amp;&amp;和||运算符。</p>
<ul>
<li>A&amp;&amp;B，如果A==0，就没有必要继续执行&amp;&amp;B了；A非0，就需要继续执行&amp;&amp;B。</li>
<li>A||B，如果A非0，就没有必要继续执行||B了，A=0，就需要继续执行||B。<br>fork()对于父进程和子进程的返回值是不同的，按照上面的A&amp;&amp;B和A||B的分支进行画图，可以得出5个分支。</li>
</ul>
<p><img src="/img/0_1275406158t1t0.gif.png" alt="分支图"></p>
<p>加上前面的fork和最后的fork，总共4*5=20个进程，除去main主进程，就是19个进程了。</p>
<h3 id="fork高阶知识"><a href="#fork高阶知识" class="headerlink" title="fork高阶知识"></a>fork高阶知识</h3><pre><code>就fork函数讲一下操作系统进程的创建、死亡和调度等。
</code></pre><h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><p><a href="http://blog.csdn.net/dog_in_yellow/archive/2008/01/13/2041079.aspx" target="_blank" rel="external">http://blog.csdn.net/dog_in_yellow/archive/2008/01/13/2041079.aspx</a></p>
<p><a href="http://blog.chinaunix.net/u1/53053/showart_425189.html" target="_blank" rel="external">http://blog.chinaunix.net/u1/53053/showart_425189.html</a></p>
<p><a href="http://blog.csdn.net/saturnbj/archive/2009/06/19/4282639.aspx" target="_blank" rel="external">http://blog.csdn.net/saturnbj/archive/2009/06/19/4282639.aspx</a></p>
<p><a href="http://www.cppblog.com/zhangxu/archive/2007/12/02/37640.html" target="_blank" rel="external">http://www.cppblog.com/zhangxu/archive/2007/12/02/37640.html</a></p>
<p><a href="http://www.qqread.com/linux/2010/03/y491043.html" target="_blank" rel="external">http://www.qqread.com/linux/2010/03/y491043.html</a></p>
<p><a href="http://www.yuanma.org/data/2009/1103/article_3998.html" target="_blank" rel="external">http://www.yuanma.org/data/2009/1103/article_3998.html</a></p>
]]></content>
      
        
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[汇编语言入门qwq]]></title>
      <url>https://b0lv42.github.io/2017/03/28/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>qwq</p>
<h3 id="汇编语言入门一：环境准备"><a href="#汇编语言入门一：环境准备" class="headerlink" title="汇编语言入门一：环境准备"></a><a href="https://zhuanlan.zhihu.com/p/23618489" target="_blank" rel="external">汇编语言入门一：环境准备</a></h3><h3 id="汇编语言入门二：环境有了先过把瘾"><a href="#汇编语言入门二：环境有了先过把瘾" class="headerlink" title="汇编语言入门二：环境有了先过把瘾"></a><a href="https://zhuanlan.zhihu.com/p/23639191" target="_blank" rel="external">汇编语言入门二：环境有了先过把瘾</a></h3><h3 id="汇编语言入门三：是时候上内存了"><a href="#汇编语言入门三：是时候上内存了" class="headerlink" title="汇编语言入门三：是时候上内存了"></a><a href="https://zhuanlan.zhihu.com/p/23722940" target="_blank" rel="external">汇编语言入门三：是时候上内存了</a></h3><h3 id="汇编语言入门四：打通C和汇编语言"><a href="#汇编语言入门四：打通C和汇编语言" class="headerlink" title="汇编语言入门四：打通C和汇编语言"></a><a href="https://zhuanlan.zhihu.com/p/23779935" target="_blank" rel="external">汇编语言入门四：打通C和汇编语言</a></h3><h3 id="汇编语言入门五：流程控制（一）"><a href="#汇编语言入门五：流程控制（一）" class="headerlink" title="汇编语言入门五：流程控制（一）"></a><a href="https://zhuanlan.zhihu.com/p/23845369" target="_blank" rel="external">汇编语言入门五：流程控制（一）</a></h3><h3 id="汇编语言入门六：流程控制（二）"><a href="#汇编语言入门六：流程控制（二）" class="headerlink" title="汇编语言入门六：流程控制（二）"></a><a href="https://zhuanlan.zhihu.com/p/23902265" target="_blank" rel="external">汇编语言入门六：流程控制（二）</a></h3><h3 id="汇编语言入门七：函数调用（一）"><a href="#汇编语言入门七：函数调用（一）" class="headerlink" title="汇编语言入门七：函数调用（一）"></a><a href="https://zhuanlan.zhihu.com/p/24129384" target="_blank" rel="external">汇编语言入门七：函数调用（一）</a></h3><h3 id="汇编语言入门八：函数调用（二）"><a href="#汇编语言入门八：函数调用（二）" class="headerlink" title="汇编语言入门八：函数调用（二）"></a><a href="https://zhuanlan.zhihu.com/p/24265088" target="_blank" rel="external">汇编语言入门八：函数调用（二）</a></h3><h3 id="汇编语言入门九：总结与后续（闲扯）"><a href="#汇编语言入门九：总结与后续（闲扯）" class="headerlink" title="汇编语言入门九：总结与后续（闲扯）"></a><a href="https://zhuanlan.zhihu.com/p/24424432" target="_blank" rel="external">汇编语言入门九：总结与后续（闲扯）</a></h3>]]></content>
      
        
        <tags>
            
            <tag> 资料 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 2500 【简单题】做一个正气的杭电人]]></title>
      <url>https://b0lv42.github.io/2017/03/11/HDOJ%202500%20%E3%80%90%E7%AE%80%E5%8D%95%E9%A2%98%E3%80%91%E5%81%9A%E4%B8%80%E4%B8%AA%E6%AD%A3%E6%B0%94%E7%9A%84%E6%9D%AD%E7%94%B5%E4%BA%BA/</url>
      <content type="html"><![CDATA[<p>###【题目描述】<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2500" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=2500</a></p>
<p>###【思路】<br>超简单 就不写辣！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> T,n;</div><div class="line"></div><div class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (T--)</div><div class="line">      &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n*<span class="number">3</span>;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) <span class="built_in">printf</span>(<span class="string">"HDU"</span>);</div><div class="line">                  <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">            &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 3790 【Dijkstra】最短路径问题]]></title>
      <url>https://b0lv42.github.io/2017/03/11/HDOJ%203790%20%E3%80%90Dijkstra%E3%80%91%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3790" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=3790</a></p>
<h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a>【思路】</h3><p>松弛操作每更新一条边，不管被更新的点的cost值是否最小都要被更新，这里wa了3发…..<br>当被更新的点的dis值相等时再检查cost的值是否最小。<br><br><br><br></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max=<span class="number">2100000</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; Pair;</div><div class="line">priority_queue&lt;Pair,<span class="built_in">vector</span>&lt;Pair&gt;,greater&lt;Pair&gt; &gt; Q;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,S,T,tail,dis[<span class="number">1100</span>],head[<span class="number">1100</span>],cost[<span class="number">1100</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> c,w,to,next;</div><div class="line">&#125;k,edge[<span class="number">210000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> d,<span class="keyword">int</span> p)</span></span></div><div class="line">&#123;</div><div class="line">      edge[tail].w=d;</div><div class="line">      edge[tail].to=v;</div><div class="line">      edge[tail].c=p;</div><div class="line">      edge[tail].next=head[u];</div><div class="line">      head[u]=tail++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dij</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      Pair s,u;</div><div class="line">      <span class="keyword">int</span> v,val;</div><div class="line"></div><div class="line">      dis[S]=<span class="number">0</span>;</div><div class="line">      cost[S]=<span class="number">0</span>;</div><div class="line">      s.first=<span class="number">0</span>;</div><div class="line">      s.second=S;</div><div class="line">      Q.push(s);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (!Q.empty())</div><div class="line">      &#123;</div><div class="line">            u=Q.top();</div><div class="line">            Q.pop();</div><div class="line">            v=u.second;</div><div class="line">            val=u.first;</div><div class="line">            <span class="keyword">if</span> (dis[v]&lt;val) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=head[v];i!=<span class="number">-1</span>;i=edge[i].next)</div><div class="line">            &#123;</div><div class="line">                  k=edge[i];</div><div class="line">                  <span class="keyword">if</span> (dis[k.to]&gt;dis[v]+k.w)</div><div class="line">                  &#123;</div><div class="line">                        dis[k.to]=dis[v]+k.w;</div><div class="line">                        Q.push(Pair(dis[k.to],k.to));</div><div class="line">                        cost[k.to]=cost[v]+k.c;</div><div class="line">                  &#125;</div><div class="line">                  <span class="keyword">else</span> <span class="keyword">if</span> (dis[k.to]==dis[v]+k.w)</div><div class="line">                        cost[k.to]=min(cost[k.to],cost[v]+k.c);</div><div class="line">            &#125;</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n,m,u,v,d,p;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF)</div><div class="line">      &#123;</div><div class="line">            <span class="keyword">if</span> (!n &amp;&amp; !m) <span class="keyword">break</span>;</div><div class="line"></div><div class="line">            tail=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1100</span>;i++) head[i]=<span class="number">-1</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1100</span>;i++) dis[i]=Max;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1100</span>;i++) cost[i]=Max;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;u,&amp;v,&amp;d,&amp;p);</div><div class="line">                  build(u,v,d,p);</div><div class="line">                  build(v,u,d,p);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;S,&amp;T);</div><div class="line"></div><div class="line">            Dij();</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,dis[T],cost[T]);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (!q.empty())</div><div class="line">&#123;</div><div class="line">	xx = q.front();</div><div class="line">	q.pop();</div><div class="line">	QM[xx] = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nNum; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (dist[i] &gt; dist[xx] + g[xx][i])</div><div class="line">		&#123;</div><div class="line">			dist[i] = dist[xx] + g[xx][i];</div><div class="line">			px[i] = px[xx] + cost[xx][i];</div><div class="line">			<span class="keyword">if</span> (QM[i] == <span class="number">0</span>)</div><div class="line">			&#123;</div><div class="line">				QM[i] = <span class="number">1</span>;</div><div class="line">				q.push(i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (dist[i] == dist[xx] + g[xx][i] &amp;&amp; px[i] &gt; px[xx] + cost[xx][i])</div><div class="line">		&#123;</div><div class="line">			px[i] = px[xx] + cost[xx][i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 2544 【Dijkstra】最短路]]></title>
      <url>https://b0lv42.github.io/2017/03/11/HDOJ%202544%20%E3%80%90Dijkstra%E3%80%91%E6%9C%80%E7%9F%AD%E8%B7%AF/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2544" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=2544</a><br><br><br><br></p>
<h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a>【思路】</h3><p>啊就是最短路裸题…Dijkstra+heap<br><br><br><br><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max=<span class="number">2100000</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; Pair;</div><div class="line">priority_queue&lt;Pair,<span class="built_in">vector</span>&lt;Pair&gt;,greater&lt;Pair&gt; &gt; Q;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,tail,dis[<span class="number">200</span>],head[<span class="number">200</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> w,to,next;</div><div class="line">&#125;k,edge[<span class="number">21000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">      edge[tail].w=x;</div><div class="line">      edge[tail].to=v;</div><div class="line">      edge[tail].next=head[u];</div><div class="line">      head[u]=tail++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dij</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      Pair s,u;</div><div class="line">      <span class="keyword">int</span> v,val;</div><div class="line"></div><div class="line">      dis[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">      s.first=<span class="number">0</span>;</div><div class="line">      s.second=<span class="number">1</span>;</div><div class="line">      Q.push(s);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (!Q.empty())</div><div class="line">      &#123;</div><div class="line">            u=Q.top();</div><div class="line">            Q.pop();</div><div class="line">            v=u.second;</div><div class="line">            val=u.first;</div><div class="line">            <span class="keyword">if</span> (dis[v]&lt;val) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=head[v];i!=<span class="number">-1</span>;i=edge[i].next)</div><div class="line">            &#123;</div><div class="line">                  k=edge[i];</div><div class="line">                  <span class="keyword">if</span> (dis[k.to]&gt;dis[v]+k.w)</div><div class="line">                  &#123;</div><div class="line">                        dis[k.to]=dis[v]+k.w;</div><div class="line">                        Q.push(Pair(dis[k.to],k.to));</div><div class="line">                  &#125;</div><div class="line">            &#125;</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n,m,u,v,x;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF)</div><div class="line">      &#123;</div><div class="line">            <span class="keyword">if</span> (!n &amp;&amp; !m) <span class="keyword">break</span>;</div><div class="line"></div><div class="line">            tail=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">200</span>;i++) head[i]=<span class="number">-1</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">200</span>;i++) dis[i]=Max;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;x);</div><div class="line">                  build(u,v,x);</div><div class="line">                  build(v,u,x);</div><div class="line">            &#125;</div><div class="line">            Dij();</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dis[n]);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 2066 【Dijkstra】一个人的旅行]]></title>
      <url>https://b0lv42.github.io/2017/03/10/HDOJ%202066%20%E3%80%90Dijkstra%E3%80%91%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9A%84%E6%97%85%E8%A1%8C/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2066" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=2066</a></p>
<h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a>【思路】</h3><p>看起来是多源多终点的最短路问题，每个起点和每个终点都枚举的话，复杂度会很高，所以我自己建一个点，编号是0，在它与所有的起点之间建一条费用为0的双向边，再建一个点，编号是2000（远大于数据范围），在它和所有的终点之间建0费用边。<br>然后问题就很好解决了，单源最短路嘿！<em>(:з」∠)</em></p>
<h3 id="Dijkstra-heap-前向星："><a href="#Dijkstra-heap-前向星：" class="headerlink" title="Dijkstra+heap+前向星："></a>Dijkstra+heap+前向星：</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max=<span class="number">21000000</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; Pair;</div><div class="line">priority_queue&lt; Pair, <span class="built_in">vector</span>&lt;Pair&gt;, greater&lt;Pair&gt; &gt; Q;</div><div class="line"></div><div class="line"><span class="keyword">int</span> dis[<span class="number">2100</span>],head[<span class="number">2100</span>];</div><div class="line"><span class="keyword">int</span> tail;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> w,to,next;</div><div class="line">&#125;edge[<span class="number">201000</span>],k;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">      edge[tail].w=x;</div><div class="line">      edge[tail].to=b;</div><div class="line">      edge[tail].next=head[a];</div><div class="line">      head[a]=tail++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      Pair s,u;</div><div class="line">      <span class="keyword">int</span> v,val;</div><div class="line"></div><div class="line">      dis[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">      s.first=<span class="number">0</span>;</div><div class="line">      s.second=<span class="number">0</span>;</div><div class="line">      Q.push(s);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (!Q.empty())</div><div class="line">      &#123;</div><div class="line">            u=Q.top();</div><div class="line">            Q.pop();</div><div class="line">            val=u.first;</div><div class="line">            v=u.second;</div><div class="line">            <span class="keyword">if</span> (dis[v]&lt;val) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=head[v]; i!=<span class="number">-1</span>; i=edge[i].next)</div><div class="line">            &#123;</div><div class="line">                  k=edge[i];</div><div class="line">                  <span class="keyword">if</span> (dis[k.to]&gt;dis[v]+k.w)</div><div class="line">                  &#123;</div><div class="line">                        dis[k.to]=dis[v]+k.w;</div><div class="line">                        Q.push(Pair(dis[k.to],k.to));</div><div class="line">                  &#125;</div><div class="line">            &#125;</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> T,S,D,a,b,x;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;T,&amp;S,&amp;D)!=EOF)</div><div class="line">      &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2100</span>;i++) head[i]=<span class="number">-1</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2100</span>;i++) dis[i]=Max;</div><div class="line">            tail=<span class="number">0</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;x);</div><div class="line">                  build(a,b,x);</div><div class="line">                  build(b,a,x);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=S;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                  build(<span class="number">0</span>,x,<span class="number">0</span>);</div><div class="line">                  build(x,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=D;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                  build(<span class="number">2000</span>,x,<span class="number">0</span>);</div><div class="line">                  build(x,<span class="number">2000</span>,<span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">            Dijkstra();</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dis[<span class="number">2000</span>]);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1874 【FLoyd】【Bellman】【Dijkstra】畅通工程续]]></title>
      <url>https://b0lv42.github.io/2017/03/09/HDOJ%201874%20%E3%80%90FLoyd%E3%80%91%E3%80%90Bellman%E3%80%91%E7%95%85%E9%80%9A%E5%B7%A5%E7%A8%8B%E7%BB%AD/</url>
      <content type="html"><![CDATA[<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1874" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1874</a><br><br><br><br></p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>单源单终点求最短路，有很多写法…数据小。<br>P.S.用floyd是有坑的，数据会给出一条起点和终点相同的正边，就会WA。<br><br><br><br></p>
<h2 id="FLoyd"><a href="#FLoyd" class="headerlink" title="FLoyd"></a>FLoyd</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">210000</span>;</div><div class="line"><span class="keyword">int</span> dis[<span class="number">300</span>][<span class="number">300</span>];</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n, m, a, b, s, t, x;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n + <span class="number">1</span>; i++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n + <span class="number">1</span>; j++)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span> (i == j) dis[i][i] = <span class="number">0</span>;</div><div class="line">				<span class="keyword">else</span> dis[i][j] = Max;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</div><div class="line">			a++; b++;</div><div class="line">			<span class="keyword">if</span> (dis[a][b]&gt;x) dis[a][b] = dis[b][a] = x;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= n; k++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">					dis[i][j] = min(dis[i][j], dis[i][k] + dis[k][j]);</div><div class="line"></div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;s, &amp;t);</div><div class="line">		<span class="keyword">if</span> (dis[s + <span class="number">1</span>][t + <span class="number">1</span>] == Max) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="number">-1</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[s + <span class="number">1</span>][t + <span class="number">1</span>]);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><br><br><br><br><br></p>
<h2 id="Bellman-Ford："><a href="#Bellman-Ford：" class="headerlink" title="Bellman_Ford："></a>Bellman_Ford：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">2100000</span>;</div><div class="line"><span class="keyword">int</span> dis[<span class="number">300</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> from, to, value;</div><div class="line">&#125;edge[<span class="number">22000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Bellman_Ford</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> s, <span class="keyword">int</span> t)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++) dis[i] = Max;</div><div class="line">	dis[s] = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n; i++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</div><div class="line">		&#123;</div><div class="line">			dis[edge[j].to] = min(dis[edge[j].to], dis[edge[j].from] + edge[j].value);</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n, m, s, t;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;edge[i].from, &amp;edge[i].to, &amp;edge[i].value);</div><div class="line">			edge[i + m].to = edge[i].from;</div><div class="line">			edge[i + m].from = edge[i].to;</div><div class="line">			edge[i + m].value = edge[i].value;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;s, &amp;t);</div><div class="line">		Bellman_Ford(n, m &lt;&lt; <span class="number">1</span>, s, t);</div><div class="line">		<span class="keyword">if</span> (dis[t] == Max) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[t]);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Dijkstra-没优化-邻接矩阵："><a href="#Dijkstra-没优化-邻接矩阵：" class="headerlink" title="Dijkstra 没优化+邻接矩阵："></a>Dijkstra 没优化+邻接矩阵：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">210000</span>;</div><div class="line"><span class="keyword">int</span> dis[<span class="number">300</span>], vis[<span class="number">300</span>], Map[<span class="number">300</span>][<span class="number">300</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> s, <span class="keyword">int</span> t)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++) dis[i] = Max;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++) vis[i] = <span class="number">0</span>;</div><div class="line">	dis[s] = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> v = <span class="number">-1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">			<span class="keyword">if</span> (!vis[i] &amp;&amp; (v == <span class="number">-1</span> || dis[i]&lt;dis[v])) v = i;</div><div class="line">		<span class="keyword">if</span> (v == <span class="number">-1</span>) <span class="keyword">break</span>;</div><div class="line">		vis[v] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">			dis[i] = min(dis[i], dis[v] + Map[v][i]);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> a, b, x, n, m, s, t;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;<span class="number">300</span>; j++)</div><div class="line">				<span class="keyword">if</span> (i == j) Map[i][j] = <span class="number">0</span>;</div><div class="line">				<span class="keyword">else</span> Map[i][j] = Max;</div><div class="line"></div><div class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">				&#123;</div><div class="line">					<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</div><div class="line">					<span class="keyword">if</span> (Map[a + <span class="number">1</span>][b + <span class="number">1</span>]&gt;x) Map[a + <span class="number">1</span>][b + <span class="number">1</span>] = Map[b + <span class="number">1</span>][a + <span class="number">1</span>] = x;</div><div class="line">				&#125;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;s, &amp;t);</div><div class="line">				dijkstra(n, m, s + <span class="number">1</span>, t + <span class="number">1</span>);</div><div class="line">				<span class="keyword">if</span> (dis[t + <span class="number">1</span>] != Max) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[t + <span class="number">1</span>]);</div><div class="line">				<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><br><br><br></p>
<h2 id="Dijkstra-heap："><a href="#Dijkstra-heap：" class="headerlink" title="Dijkstra+heap："></a>Dijkstra+heap：</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = <span class="number">21000000</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; Pair;</div><div class="line"></div><div class="line"><span class="keyword">int</span> dis[<span class="number">300</span>], head[<span class="number">300</span>];</div><div class="line"><span class="keyword">int</span> S, T, m, n, tail;</div><div class="line">priority_queue&lt; Pair, <span class="built_in">vector</span>&lt;Pair&gt;, greater&lt;Pair&gt; &gt; Q;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> w, to, next;</div><div class="line">&#125;edge[<span class="number">3000</span>], k;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">	edge[tail].w = x;</div><div class="line">	edge[tail].to = b;</div><div class="line">	edge[tail].next = head[a];</div><div class="line">	head[a] = tail++;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	Pair s;</div><div class="line">	<span class="keyword">int</span> v, val;</div><div class="line"></div><div class="line">	dis[S] = <span class="number">0</span>;</div><div class="line">	s.first = <span class="number">0</span>;</div><div class="line">	s.second = S;</div><div class="line">	Q.push(s);</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (!Q.empty())</div><div class="line">	&#123;</div><div class="line">		Pair u = Q.top();</div><div class="line">		Q.pop();</div><div class="line">		val = u.first;</div><div class="line">		v = u.second;</div><div class="line">		<span class="keyword">if</span> (dis[v]&lt;val) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = head[v]; i != <span class="number">-1</span>; i = edge[i].next)</div><div class="line">		&#123;</div><div class="line">			k = edge[i];</div><div class="line">			<span class="keyword">if</span> (dis[k.to]&gt;dis[v] + k.w)</div><div class="line">			&#123;</div><div class="line">				dis[k.to] = dis[v] + k.w;</div><div class="line">				Q.push(Pair(dis[k.to], k.to));</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> a, b, x;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++) dis[i] = Max;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">300</span>; i++) head[i] = <span class="number">-1</span>;</div><div class="line">		tail = <span class="number">0</span>;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</div><div class="line">			build(a, b, x);</div><div class="line">			build(b, a, x);</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;S, &amp;T);</div><div class="line">		Dijkstra();</div><div class="line">		<span class="keyword">if</span> (dis[T] != Max) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[T]);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1215 【简单题】七夕节  &  HDOJ 1406 【简单题】完数]]></title>
      <url>https://b0lv42.github.io/2017/03/08/HDOJ%201215%20%E3%80%90%E7%AE%80%E5%8D%95%E9%A2%98%E3%80%91%E4%B8%83%E5%A4%95%E8%8A%82%20%20&amp;%20%20HDOJ%201406%20%E3%80%90%E7%AE%80%E5%8D%95%E9%A2%98%E3%80%91%E5%AE%8C%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>【题目描述】<br>P1215：<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1215" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1215</a><br>P1406：<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1406" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1406</a></p>
<p>【思路】<br>这2个题差不多的，找完数。纯枚举..<br>P.S.1406有坑，sum1可能会大于sum2，要提前判断一下。</p>
<p>1215：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> T,n,x;</div><div class="line">      <span class="keyword">long</span> <span class="keyword">long</span> sum;</div><div class="line"></div><div class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (T--)</div><div class="line">      &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">            sum=<span class="number">0</span>;</div><div class="line">            x=<span class="built_in">floor</span>(<span class="built_in">sqrt</span>(n)+<span class="number">0.5</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=x;i++)</div><div class="line">                  <span class="keyword">if</span> (n%i==<span class="number">0</span>)</div><div class="line">                  &#123;</div><div class="line">                        sum+=i;</div><div class="line">                        <span class="keyword">if</span> (n/i&lt;n &amp;&amp; n/i&gt;i) sum+=n/i;</div><div class="line">                  &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%I64d\n"</span>,sum);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>1406：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> f[<span class="number">11000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> T,a,b,n,x;</div><div class="line">      <span class="keyword">long</span> <span class="keyword">long</span> sum;</div><div class="line"></div><div class="line">      f[<span class="number">0</span>]=<span class="number">0</span>;f[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> n=<span class="number">2</span>;n&lt;<span class="number">11000</span>;n++)</div><div class="line">      &#123;</div><div class="line">            sum=<span class="number">0</span>;</div><div class="line">            x=<span class="built_in">floor</span>(<span class="built_in">sqrt</span>(n)+<span class="number">0.5</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=x;i++)</div><div class="line">                  <span class="keyword">if</span> (n%i==<span class="number">0</span>)</div><div class="line">                  &#123;</div><div class="line">                        sum+=i;</div><div class="line">                        <span class="keyword">if</span> (n/i&lt;n &amp;&amp; n/i&gt;i) sum+=n/i;</div><div class="line">                  &#125;</div><div class="line">            <span class="keyword">if</span> (sum==n) f[n]=f[n<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line">            <span class="keyword">else</span> f[n]=f[n<span class="number">-1</span>];</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">      <span class="keyword">while</span> (T--)</div><div class="line">      &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</div><div class="line">            <span class="keyword">if</span> (a&gt;b) swap(a,b);</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[b]-f[a<span class="number">-1</span>]);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1217 【Floyd】Arbitrage]]></title>
      <url>https://b0lv42.github.io/2017/03/06/HDOJ%201217%20%E3%80%90Floyd%E3%80%91Arbitrage/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1217" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1217</a><br><br></p>
<p>###【思路】<br>就是求最长路，因为起点和终点无数并且数据很小，所以用floyd也可以。<br>因为是倍数关系，所以当两个点不通时，边值就初始化为0，因为任何数乘以0都等于0嘛。<br>松弛操作完毕后，点i到自身的值即<code>dis[i][i]</code>若是大于1，就说明可以盈利啦。</p>
<p>P.S.1：此题为单向边，我之前建成了双向的orz<br>P.S.2：原来cin是不会读入回车和空格的，但是会吃掉它。就是说不用像scanf那样读入一个int的m后还得用getchar()吃掉一个回车符号，这里我调了半天才发现，果然还是语言基础太差啊，老是错在细节上面。<br><br></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="built_in">string</span> Name[<span class="number">100</span>];</div><div class="line"><span class="keyword">double</span> dis[<span class="number">110</span>][<span class="number">110</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n,m,x,y,Case,flag;</div><div class="line">      <span class="keyword">double</span> num;</div><div class="line">      <span class="keyword">char</span> ch;</div><div class="line">      <span class="built_in">string</span> s1,s2;</div><div class="line"></div><div class="line">      Case=<span class="number">0</span>;</div><div class="line">      <span class="keyword">while</span> (<span class="built_in">cin</span>&gt;&gt;n &amp;&amp; n)</div><div class="line">      &#123;</div><div class="line">            Case++;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">cin</span>&gt;&gt;Name[i];</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) dis[i][j]=<span class="number">0</span>;</div><div class="line"></div><div class="line">            <span class="built_in">cin</span>&gt;&gt;m;;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            &#123;</div><div class="line">                  x=y=<span class="number">0</span>;</div><div class="line">                  <span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;num&gt;&gt;s2;</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">                  &#123;</div><div class="line">                        <span class="keyword">if</span> (Name[j]==s1) x=j;</div><div class="line">                        <span class="keyword">if</span> (Name[j]==s2) y=j;</div><div class="line">                        <span class="keyword">if</span> (x &amp;&amp; y) <span class="keyword">break</span>;</div><div class="line">                  &#125;</div><div class="line">                  dis[x][y]=num;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">                        &#123;</div><div class="line">                              dis[i][j]=max(dis[i][j],dis[i][k]*dis[k][j]);</div><div class="line">                        &#125;</div><div class="line"></div><div class="line">            flag=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">                  <span class="keyword">if</span> (dis[i][i]&gt;<span class="number">1</span>)</div><div class="line">                  &#123;</div><div class="line">                        flag=<span class="number">1</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                  &#125;</div><div class="line"></div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"Case "</span>&lt;&lt;Case&lt;&lt;<span class="string">": "</span>;</div><div class="line">            <span class="keyword">if</span> (flag) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">            <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1869 【Floyd】六度分离]]></title>
      <url>https://b0lv42.github.io/2017/03/05/HDOJ%201869%20%E3%80%90Floyd%E3%80%91%E5%85%AD%E5%BA%A6%E5%88%86%E7%A6%BB/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1869" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1869</a><br><br><br><br></p>
<p>###【思路】<br>因为是任意起点和任意的中点而且数据也很小，所以用floyd比较合适。</p>
<p>PS1：题目有坑，编号是从0到n-1的，我习惯用1到n编号<br>PS2：在<code>dis[i][j]=min(dis[i][j],dis[i][k]+dis[k][j])</code>松弛操作这里如果给dis数组赋的初值太大，会炸，比如我之前赋的21亿，操作时21亿+21亿，就炸了，WA了一发。<br><br></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> dis[<span class="number">300</span>][<span class="number">300</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n,m,a,b,check;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF)</div><div class="line">      &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">250</span>;i++)</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">250</span>;j++)</div><div class="line">                        <span class="keyword">if</span> (i==j) dis[i][j]==<span class="number">0</span>;</div><div class="line">                        <span class="keyword">else</span> dis[i][j]=<span class="number">210000000</span>;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</div><div class="line">                  dis[a+<span class="number">1</span>][b+<span class="number">1</span>]=dis[b+<span class="number">1</span>][a+<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">                              dis[i][j]=min(dis[i][j],dis[i][k]+dis[k][j]);              <span class="comment">//floyd</span></div><div class="line"></div><div class="line">            check=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">                        <span class="keyword">if</span> (dis[i][j]&gt;<span class="number">7</span>)</div><div class="line">                        &#123;</div><div class="line">                              check=<span class="number">1</span>;</div><div class="line">                              <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                  <span class="keyword">if</span> (check==<span class="number">1</span>) <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (check==<span class="number">1</span>) <span class="built_in">printf</span> (<span class="string">"No\n"</span>);</div><div class="line">            <span class="keyword">else</span> <span class="built_in">printf</span> (<span class="string">"Yes\n"</span>);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1290 【递推】献给杭电五十周年校庆的礼物]]></title>
      <url>https://b0lv42.github.io/2017/03/04/HDOJ%201290%20%E3%80%90%E9%80%92%E6%8E%A8%E3%80%91%E7%8C%AE%E7%BB%99%E6%9D%AD%E7%94%B5%E4%BA%94%E5%8D%81%E5%91%A8%E5%B9%B4%E6%A0%A1%E5%BA%86%E7%9A%84%E7%A4%BC%E7%89%A9/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1290" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1290</a><br><br></p>
<p>###【思路】<br>和直线切割平面是一个道理，要想得到最多的平面，第i条直线就得与前i-1条直线相交，此时它自己被分割成i段，每段都把它所在的平面切成2块，所以对于平面，f[i]=f[i-1]+i;<br>平面切割空间时，第i个平面必须要与前i-1个平面全部相交，即自己被i-1条直线切割成f[i-1]个平面，每个平面把它所在的空间切成2块，所以对于空间，zone[i]=zone[i-1]+f[i-1]。<br>P.S.输出需要用long long。<br><br></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[<span class="number">1100</span>],zone[<span class="number">1100</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n;</div><div class="line"></div><div class="line">      f[<span class="number">1</span>]=<span class="number">2</span>;</div><div class="line">      f[<span class="number">2</span>]=<span class="number">4</span>;</div><div class="line">      zone[<span class="number">1</span>]=<span class="number">2</span>;</div><div class="line">      zone[<span class="number">2</span>]=<span class="number">4</span>;</div><div class="line"></div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;<span class="number">1100</span>;i++)</div><div class="line">      &#123;</div><div class="line">            f[i]=f[i<span class="number">-1</span>]+i;</div><div class="line">            zone[i]=zone[i<span class="number">-1</span>]+f[i<span class="number">-1</span>];</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n))</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%I64d\n"</span>,zone[n]);</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1051 【贪心】 Wooden Sticks]]></title>
      <url>https://b0lv42.github.io/2017/03/03/HDOJ%201051%20%E3%80%90%E8%B4%AA%E5%BF%83%E3%80%91%20Wooden%20Sticks/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1051" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1051</a><br><br><br><br></p>
<h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a>【思路】</h3><p>就是一个简单的贪心，我还以为是LIS….<br>思路就是对于每一根木棍，如果它没有使用过的话，如果L和W都&gt;=当前，就用它更新当前，并标记使用过。如果不满足&gt;=，就把它加入队列，作为新的开头。每次都是取出队列头，如此循环，直到所有的木棍全部被切割完成。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> Use[<span class="number">11000</span>];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> data</div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> l,w;</div><div class="line">&#125;wood[<span class="number">11000</span>],change[<span class="number">11000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(data a,data b)</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">if</span> (a.l!=b.l) <span class="keyword">return</span> (a.l&lt;b.l);    <span class="comment">//按长度排序</span></div><div class="line">      <span class="keyword">return</span> (a.w&lt;b.w);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> n,x,y,t,T,ans,num;</div><div class="line"></div><div class="line">      <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (T--)</div><div class="line">      &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            &#123;</div><div class="line">                  Use[i]=<span class="number">1</span>;</div><div class="line">                  <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;wood[i].l,&amp;wood[i].w);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            sort(wood+<span class="number">1</span>,wood+<span class="number">1</span>+n,cmp);</div><div class="line"></div><div class="line">            x=<span class="number">0</span>;y=<span class="number">0</span>;</div><div class="line">            Use[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">            num=<span class="number">1</span>;ans=<span class="number">1</span>;</div><div class="line">            change[<span class="number">1</span>].l=wood[<span class="number">1</span>].l;</div><div class="line">            change[<span class="number">1</span>].w=wood[<span class="number">1</span>].w;</div><div class="line"></div><div class="line">            <span class="keyword">while</span> (num&lt;n)</div><div class="line">            &#123;</div><div class="line">                  t=<span class="number">1</span>;</div><div class="line">                  x=change[<span class="number">1</span>].l;</div><div class="line">                  y=change[<span class="number">1</span>].w;</div><div class="line"></div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">                        <span class="keyword">if</span> (Use[i]==<span class="number">1</span>)</div><div class="line">                        &#123;</div><div class="line">                              <span class="keyword">if</span> ( x&lt;=wood[i].l &amp;&amp; y&lt;=wood[i].w )</div><div class="line">                              &#123;</div><div class="line">                                    num++;</div><div class="line">                                    x=wood[i].l;</div><div class="line">                                    y=wood[i].w;</div><div class="line">                                    Use[i]=<span class="number">0</span>;</div><div class="line">                              &#125;</div><div class="line">                              <span class="keyword">else</span> <span class="keyword">if</span> (t==<span class="number">1</span>)</div><div class="line">                              &#123;</div><div class="line">                                    num++;</div><div class="line">                                    ans++;</div><div class="line">                                    Use[i]=<span class="number">0</span>;</div><div class="line">                                    change[t].l=wood[i].l;</div><div class="line">                                    change[t].w=wood[i].w;</div><div class="line">                                    t++;</div><div class="line">                              &#125;</div><div class="line">                        &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HDOJ 1098 【数学题】Ignatius's puzzle]]></title>
      <url>https://b0lv42.github.io/2017/03/02/HDOJ%201098%20%E3%80%90%E6%95%B0%E5%AD%A6%E9%A2%98%E3%80%91Ignatius's%20puzzle/</url>
      <content type="html"><![CDATA[<h3 id="【题目描述】"><a href="#【题目描述】" class="headerlink" title="【题目描述】"></a>【题目描述】</h3><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1098" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1098</a><br><br></p>
<h3 id="【思路】"><a href="#【思路】" class="headerlink" title="【思路】"></a>【思路】</h3><p>要求是给定k，求一个最小的a，对任意的x都能使f(x)整除65，所以f(1)=5+13+a<em>k=18+a</em>k，只要枚举a就可以啦，范围是0到64，因为对数m取模的话，结果是0到m-1循环的啦。查了下解题证明，即证明f(x+1)也成立。</p>
<blockquote>
<p> 求解思路：</p>
<p>f(x)=5<em>x^13+13</em>x^5+k<em>a</em>x;</p>
<p>其中题中”f(x)|65”表示对于任意的整数x,f(x)都能被65整除.所以不难推断:f(x+1)|65也成立.</p>
<p>f(x+1)=5<em>(x+1)^13+13</em>(x+1)^5+k<em>a</em>(x+1),</p>
<p>根据二项式定理:(a+b)^n=C(n,0)a^n+C(n,1)a^(n-1)<em>b+C(n,2)a^(n-2)</em>b^2+…+C(n,n)b^n</p>
<p>得：f(x+1)=5<em>(C(13,0)+C(13,1)</em>x+C(13,2)<em>x^2+…+C(13,13)</em>x^13) +<br>13<em>(C(5,0)+C(5,1)</em>x+…+C(5,5)<em>x^5) + k</em>a*(x+1);</p>
<p>从中提取出f(x)后得：</p>
<p>f(x+1)=f(x)+5<em>(C(13,0) + C(13,1)</em>x+C(13,2)<em>x^2+…+C(13,12)</em>x^12) +<br>13<em>(C(5,0)+C(5,1)</em>x+…+C(5,4)<em>x^4) + k</em>a;</p>
<p>不难看出出了5<em>C(13,0) 、13</em>C(5,0)和k<em>a三项以外，其他项无论x取任意整数都能被65整除,所以如果5</em>C(13,0)<br>+13<em>C(5,0)+k</em>a(相当于18+k*a)能被65整除的话，就可以得出f(x+1)|65了。</p>
<p>再验证一下f(1)=5+13+k<em>a=18+k</em>a同样适用。</p>
<p>所以最终的问题就是给定一个非负整数k,使得(18+k*a)|65,输出满足此条件的最小的非负整数a。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">      <span class="keyword">int</span> k,flag;</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k))</div><div class="line">      &#123;</div><div class="line">            flag=<span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">64</span>;i++)</div><div class="line">            &#123;</div><div class="line">                  <span class="keyword">if</span> ((<span class="number">18</span>+k*i)%<span class="number">65</span>==<span class="number">0</span>)</div><div class="line">                  &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);</div><div class="line">                        flag=<span class="number">0</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                  &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (flag) <span class="built_in">printf</span>(<span class="string">"no\n"</span>);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> ACM题解 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
